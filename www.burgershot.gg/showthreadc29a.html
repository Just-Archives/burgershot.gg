<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><!-- start: showthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>The internals of switch and chained else ifs and which one should you use</title>
<!-- start: headerinclude -->
<link rel="alternate" type="application/rss+xml" title="Latest Threads (RSS 2.0)" href="syndication.php" />
<link rel="alternate" type="application/atom+xml" title="Latest Threads (Atom 1.0)" href="syndication9896.php?type=atom1.0" />
<link rel="shortcut icon" type="image/png" href="https://i.imgur.com/EBFKVbK.png"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<script type="text/javascript" src="jscripts/jquery6c6d.js?ver=1804"></script>
<script type="text/javascript" src="jscripts/jquery.plugins.min6c6d.js?ver=1804"></script>
<script type="text/javascript" src="jscripts/general6c6d.js?ver=1804"></script>
<link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Lobster+Two' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/global.min.css">
<link type="text/css" rel="stylesheet" href="cache/themes/theme9/avatarep.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme9/global.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme9/css3.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/star_ratings.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/showthread.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme9/footer.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/custom.min8355.css?t=1641376402" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/extra.min8355.css?t=1641376402" />

<script type="text/javascript">
	lang.unknown_error = "An unknown error has occurred.";

	lang.select2_match = "One result is available, press enter to select it.";
	lang.select2_matches = "{1} results are available, use up and down arrow keys to navigate.";
	lang.select2_nomatches = "No matches found";
	lang.select2_inputtooshort_single = "Please enter one or more character";
	lang.select2_inputtooshort_plural = "Please enter {1} or more characters";
	lang.select2_inputtoolong_single = "Please delete one character";
	lang.select2_inputtoolong_plural = "Please delete {1} characters";
	lang.select2_selectiontoobig_single = "You can only select one item";
	lang.select2_selectiontoobig_plural = "You can only select {1} items";
	lang.select2_loadmore = "Loading more results&hellip;";
	lang.select2_searching = "Searching&hellip;";

	var cookieDomain = ".burgershot.gg";
	var cookiePath = "index.html";
	var cookiePrefix = "";
	var cookieSecureFlag = "0";
	var deleteevent_confirm = "Are you sure you want to delete this event?";
	var removeattach_confirm = "Are you sure you want to remove the selected attachment from this post?";
	var loading_text = 'Loading. <br />Please Wait&hellip;';
	var saving_changes = 'Saving changes&hellip;';
	var use_xmlhttprequest = "1";
	var my_post_key = "6428f000919b5d9a18f82d476f6b077e";
	var rootpath = "index.html";
	var imagepath = "images/index.html";
  	var yes_confirm = "Yes";
	var no_confirm = "No";
	var MyBBEditor = null;
	var spinner_image = "images/spinner.gif";
	var spinner = "<img src='" + spinner_image +"' alt='' />";
	var modal_zindex = 9999;
</script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700' rel='stylesheet' type='text/css'>
<script>
	$(document).ready(function(){
	
	//Check to see if the window is top if not then display button
	$(window).scroll(function(){
		if ($(this).scrollTop() > 100) {
			$('.scrollToTop').fadeIn();
		} else {
			$('.scrollToTop').fadeOut();
		}
	});
	
	//Click event to scroll to top
	$('.scrollToTop').click(function(){
		$('html, body').animate({scrollTop : 0},800);
		return false;
	});
	
	$('.scrollToDown').click(function(){
		$('html, body').animate({scrollTop:$(document).height()},800);
		return false;
	});
	
});
</script>
<!-- end: headerinclude -->
<script type="text/javascript">
<!--
	var quickdelete_confirm = "Are you sure you want to delete this post?";
	var quickrestore_confirm = "Are you sure you want to restore this post?";
	var allowEditReason = "1";
	lang.save_changes = "Save Changes";
	lang.cancel_edit = "Cancel Edit";
	lang.quick_edit_update_error = "There was an error editing your reply:";
	lang.quick_reply_post_error = "There was an error posting your reply:";
	lang.quick_delete_error = "There was an error deleting your reply:";
	lang.quick_delete_success = "The post was deleted successfully.";
	lang.quick_delete_thread_success = "The thread was deleted successfully.";
	lang.quick_restore_error = "There was an error restoring your reply:";
	lang.quick_restore_success = "The post was restored successfully.";
	lang.editreason = "Edit Reason";
// -->
</script>
<!-- jeditable (jquery) -->
<script type="text/javascript" src="jscripts/report6c6d.js?ver=1804"></script>
<script src="jscripts/jeditable/jeditable.min.js"></script>
<script type="text/javascript" src="jscripts/thread6c6d.js?ver=1804"></script>
</head>
<body>
	<!-- start: header -->
<div class="haut" style="height:70px">
	<a href="index.html" id="logo"><img style="position: absolute;left: -5px;top: 12px;" src="https://burgershot.gg/burgershot.svg" height="40px" />Burgershot</a>
	<span class="useroptions">
		<ul id="menu-deroulant">
			<li><a href="index.html">Home</a></li>
			<li><a href="memberlist.html">Members</a></li>
			<li><a href="showteam.html">Team</a></li>
			<li><a href="misc0615.html?action=help">Help</a></li>
			<li><a href="search.html">Search</a></li>
			<!-- start: header_welcomeblock_guest -->
<li><a href="member0ddc.html?action=register">Register</a></li>
<li><a href="member456e.html?action=login">Login</a></li>
<script>
    var connected = 0;
</script>
<!-- end: header_welcomeblock_guest -->
		</ul>
	</span>
</div>
<div style="width: 100%; height: 70px;"></div>
<!-- Start - Navigation menu -->
<nav class="headerlist" style="display:none">
<ul>
  <li><a href="index.html"><i class="fa fa-home"></i> Home</a></li><li>
	<a href="memberlist.html"><i class="fa fa-users"></i> Members</a></li><li>
	<a href="misc0615.html?action=help"><i class="fa fa-support"></i> Help</a></li><li>
	<a href="search.html"><i class="fa fa-search"></i> Search</a>
</li></ul>
</nav>
<!-- End - Navigation menu -->
<center>
<!-- Start - Advice -->
<div id="mobile_member">
</div>
<!-- End - Advice -->
</center>
<div id="container">
	<a name="top" id="top"></a>
	<div id="header">
		<div id="content">
			<div class="wrapper">
				
				
				
				
				
				
				<!-- start: nav -->
<div class="navigation" style="display:none;">
          <a href="index-2.html">
		<span id="home_bit">
			<i class="fa fa-home"></i>
		</span>
	</a>
	<span style="padding: 8px 12px;margin-left: 5px;"><!-- start: nav_bit -->
<a href="index-2.html">Burgershot</a><!-- start: nav_sep -->
<i class="fa fa-angle-double-right"></i>
<!-- end: nav_sep -->
<!-- end: nav_bit --><!-- start: nav_bit -->
<a href="forumdisplaye15e.html?fid=3">SA-MP</a><!-- start: nav_sep -->
<i class="fa fa-angle-double-right"></i>
<!-- end: nav_sep -->
<!-- end: nav_bit --><!-- start: nav_bit -->
<a href="forumdisplay2487.html?fid=37">Tutorials</a>
<!-- end: nav_bit --><!-- start: nav_sep_active -->
<i class="fa fa-angle-double-right"></i>
<!-- end: nav_sep_active --><!-- start: nav_bit_active -->
<span class="active">The internals of switch and chained else ifs and which one should you use</span>
<!-- end: nav_bit_active --></span>
</div>
<script>
var page = location.pathname;
page = page.substring(1);
if(page != 'index.php' && page != '') {
     $('.navigation').css('display', '');
}
</script>
<!-- end: nav -->
				<br />
<!-- end: header -->
	
	
	<table border="0" cellspacing="0" style="border-bottom:none;" cellpadding="7" class="tborder tfixed clear">
<div>
			<div style="font-size: 20px; background: #F6F6F6; border:none; color:#2C3E50; " class="thead">
				
	<div class="float_right">
		
	</div>
	<!-- start: showthread_ratethread -->
<div class="star_rating_container">
        <script type="text/javascript" src="jscripts/rating9348.js?ver=1400"></script>
        <div id="success_rating_322" style="float: left; padding-top: 2px; padding-right: 10px;">&nbsp;</div>
        <div class="inline_rating">

<ul class="star_rating star_rating_notrated" id="rating_thread_322">
<li style="width: 0%" class="current_rating" id="current_rating_322">0 Vote(s) - 0 Average</li>
<li><a class="five_stars" title="5 stars out of 5" href="ratethread0f71.html?tid=322&amp;rating=5&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e"></a></li>
<li><a class="four_stars" title="4 stars out of 5" href="ratethread5e7c.html?tid=322&amp;rating=4&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e"></a></li>
<li><a class="three_stars" title="3 stars out of 5" href="ratethreadf549.html?tid=322&amp;rating=3&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e"></a></li>
<li><a class="two_stars" title="2 stars out of 5" href="ratethread27c2.html?tid=322&amp;rating=2&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e"></a></li>
<li><a class="one_star" title="1 star out of 5" href="ratethreadc577.html?tid=322&amp;rating=1&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e"></a></li>
            </ul>
        </div>
</div>
<!-- end: showthread_ratethread -->
				<div>
					<strong><i class="fa fa-comments"></i> The internals of switch and chained else ifs and which one should you use</strong>
				</div>
			</div>
</div>

<tr><td id="posts_container">
	<div id="posts">
		<!-- start: postbit -->

<a name="pid3160" id="pid3160"></a>
<div class="post classic " id="post_3160">
<div class="post_flexible">
<div class="post_author scaleimages">
	<center><strong><span class="largetext"><a href="member4c0d.html?action=profile&amp;uid=16"><span style="color: #3c71af;">kristo</span></a></span></strong> <!-- start: postbit_offline -->
<br><span style="color:red;" title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<div class="author_avatar"><a href="member4c0d.html?action=profile&amp;uid=16"><img src="images/default_avatar.png" alt="" width="85" height="85" /></a></div>
<!-- end: postbit_avatar --><br>
	<div class="author_information">
			
			<span class="smalltext">
				Burgershot Member<br />
				
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
<span style="float:left">Posts:</span> <span style="float:right">47</span><br />
<span style="float:left">	Threads:</span> <span style="float:right">10</span><br />
	<span style="float:left">Joined:</span><span style="float:right"> Feb 2019</span>
	<!-- start: postbit_reputation -->
<br /><span style="float:left">Reputation:</span><span style="float:right"> <!-- start: postbit_reputation_formatted_link -->
<a href="reputationa59e.html?uid=16"><strong class="reputation_positive">7</strong></a>
<!-- end: postbit_reputation_formatted_link --></span>
<!-- end: postbit_reputation --><!-- start: postbit_profilefield -->
<br /><span style="float:left">Location:</span><span style="float:right"> Estonia</span>
<!-- end: postbit_profilefield -->
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreade7e2.html?tid=322&amp;pid=3160#pid3160" title="The internals of switch and chained else ifs and which one should you use">#1</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<span class="post_date"><i class="fa fa-clock-o"></i> 2019-04-17, 12:25 PM <span class="post_edit" id="edited_by_3160"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3160">
		<span style="color: #FF4700;" class="mycode_color"><span style="font-size: xx-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">The internals of <span style="font-family: courier new;" class="mycode_font">switch</span> and chained <span style="font-family: courier new;" class="mycode_font">else if</span>s and which one should you use</span></span></span><br />
<br />
This tutorial takes a look into how <span style="font-family: courier new;" class="mycode_font">if</span> and <span style="font-family: courier new;" class="mycode_font">switch</span> statements work on the assembly level and helps determine, where to use a <span style="font-family: courier new;" class="mycode_font">switch</span> and where to prefer chained <span style="font-family: courier new;" class="mycode_font">else if</span>s. I decided to write this tutorial, because one of the topics I am about to address is a semi-common issue and currently there is no good place to refer to when it comes to it. In addition to that, the research I did for this tutorial helped me understand the AMX structure quite a bit more than I used to before.<br />
<br />
<span style="color: RoyalBlue;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">The internals</span></span></span><br />
<br />
I used the <span style="font-family: courier new;" class="mycode_font">-a</span> flag to generate the assembly of two simple snippets of code that perform the same task, one using <span style="font-family: courier new;" class="mycode_font">switch</span> and the other using chained <span style="font-family: courier new;" class="mycode_font">else if</span>s. I also took the time to rewrite them in a more human-readable form (using variable names instead of raw addresses, named labels instead of numbered ones prefixed with <span style="font-family: courier new;" class="mycode_font">l.</span>, etc.) and to document them. It is worth noting that while the rewritten assembly is valid, it does not currently compile due to a compiler bug related to forward jumps.<br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Chained <span style="font-family: courier new;" class="mycode_font">else if</span>s</span></span></span><br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">val</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">val&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #007700">}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">val&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #007700">}&nbsp;<br /></span></code></div></div></div><br />
For the sake of simplicity I used the form <span style="font-family: courier new;" class="mycode_font">2 &lt;= val &lt;= 4</span> instead of <span style="font-family: courier new;" class="mycode_font">val &gt;= 2 &amp;&amp; val &lt;= 4</span> for the range check. If written the other way, the code would use 7 jump instructions instead of 4 and keeping track of the instructions would be more difficult. It would also be a tiny bit slower since it would have to load the value of <span style="font-family: courier new;" class="mycode_font">val</span> to the primary register one more time.<br />
<br />
When using chained <span style="font-family: courier new;" class="mycode_font">else if</span>s, the assembly contains the AMX instructions for each individual check. If the check fails, it jumps to the next check, otherwise it jumps to the end of the chain. Here is the assembly equivalent to this code:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">val</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;if&nbsp;(val&nbsp;==&nbsp;1)<br />#emit&nbsp;LOAD.S.pri&nbsp; &nbsp; val&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;load&nbsp;the&nbsp;value&nbsp;of&nbsp;val&nbsp;to&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;EQ.C.pri&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;compare&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;primary&nbsp;register&nbsp;to&nbsp;constant&nbsp;1:&nbsp;they&nbsp;must&nbsp;be&nbsp;equal;&nbsp;store&nbsp;the&nbsp;result&nbsp;in&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;JZER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; range&nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;if&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;comparison&nbsp;is&nbsp;false,&nbsp;jump&nbsp;to&nbsp;"range"&nbsp;to&nbsp;perform&nbsp;the&nbsp;next&nbsp;check<br />//&nbsp;do&nbsp;something&nbsp;here<br />#emit&nbsp;JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;everything&nbsp;is&nbsp;done,&nbsp;jump&nbsp;to&nbsp;"done"<br /><br /><br />//&nbsp;else&nbsp;if&nbsp;(2&nbsp;&lt;=&nbsp;val&nbsp;&lt;=&nbsp;4)<br /></span><span style="color: #0000BB">range</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">#emit&nbsp;CONST.pri&nbsp; &nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;store&nbsp;the&nbsp;constant&nbsp;value&nbsp;2&nbsp;in&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;LOAD.S.alt&nbsp; &nbsp; val&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;load&nbsp;the&nbsp;value&nbsp;of&nbsp;val&nbsp;to&nbsp;the&nbsp;alternate&nbsp;register<br />#emit&nbsp;SLEQ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;compare&nbsp;the&nbsp;values&nbsp;in&nbsp;the&nbsp;registers&nbsp;to&nbsp;eachother:&nbsp;2&nbsp;(primary)&nbsp;must&nbsp;be&nbsp;less&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;val&nbsp;(alternate);&nbsp;store&nbsp;the&nbsp;result&nbsp;in&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;PUSH.pri&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;load&nbsp;the&nbsp;value&nbsp;to&nbsp;the&nbsp;primary&nbsp;register&nbsp;(the&nbsp;result&nbsp;of&nbsp;the&nbsp;comparison)&nbsp;in&nbsp;the&nbsp;stack<br />#emit&nbsp;CONST.pri&nbsp; &nbsp; &nbsp;4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;store&nbsp;the&nbsp;constant&nbsp;value&nbsp;4&nbsp;in&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;SGEQ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;compare&nbsp;the&nbsp;values&nbsp;in&nbsp;the&nbsp;registers&nbsp;to&nbsp;eachother:&nbsp;4&nbsp;(primary)&nbsp;must&nbsp;be&nbsp;greater&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;val&nbsp;(alternate);&nbsp;store&nbsp;the&nbsp;result&nbsp;in&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;POP.alt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;load&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;first&nbsp;comparison&nbsp;from&nbsp;the&nbsp;stack&nbsp;to&nbsp;the&nbsp;alternate&nbsp;register<br />#emit&nbsp;AND&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;check&nbsp;if&nbsp;both&nbsp;of&nbsp;the&nbsp;comparisons&nbsp;were&nbsp;true&nbsp;by&nbsp;checking&nbsp;if&nbsp;both&nbsp;registers&nbsp;contain&nbsp;a&nbsp;non-zero&nbsp;value<br />#emit&nbsp;JZER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; otherwise&nbsp; &nbsp;//&nbsp;if&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;comparison&nbsp;is&nbsp;false,&nbsp;jump&nbsp;to&nbsp;"otherwise"<br />//&nbsp;do&nbsp;something&nbsp;here<br />#emit&nbsp;JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;everything&nbsp;is&nbsp;done,&nbsp;jump&nbsp;to&nbsp;"done"<br /><br />//&nbsp;else<br /></span><span style="color: #0000BB">otherwise</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br />//&nbsp;no&nbsp;jump&nbsp;needed&nbsp;since&nbsp;"done"&nbsp;is&nbsp;just&nbsp;after&nbsp;this&nbsp;code<br /><br /><br /></span><span style="color: #0000BB">done</span><span style="color: #007700">:&nbsp;<br /></span></code></div></div></div><br />
If the value of <span style="font-family: courier new;" class="mycode_font">val</span> is 1, the code uses four instructions:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp;val<br />EQ</span><span style="color: #007700">.</span><span style="color: #0000BB">C</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp; &nbsp;1<br />JZER &nbsp; &nbsp; &nbsp; &nbsp;range&nbsp;</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">the&nbsp;jump&nbsp;does&nbsp;not&nbsp;happen</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">but&nbsp;the&nbsp;instruction&nbsp;is&nbsp;still&nbsp;used<br />JUMP &nbsp; &nbsp; &nbsp; &nbsp;done&nbsp;<br /></span></code></div></div></div><br />
If the value of <span style="font-family: courier new;" class="mycode_font">val</span> is 2, 3 or 4, the code uses 13 instructions:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp;val<br />EQ</span><span style="color: #007700">.</span><span style="color: #0000BB">C</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp; &nbsp;1<br />JZER &nbsp; &nbsp; &nbsp; &nbsp;range<br /></span><span style="color: #007700">CONST.</span><span style="color: #0000BB">pri &nbsp; 2<br />LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">alt &nbsp;val<br />SLEQ<br />PUSH</span><span style="color: #007700">.</span><span style="color: #0000BB">pri<br /></span><span style="color: #007700">CONST.</span><span style="color: #0000BB">pri &nbsp; 4<br />SGEQ<br />POP</span><span style="color: #007700">.</span><span style="color: #0000BB">alt<br /></span><span style="color: #007700">AND<br /></span><span style="color: #0000BB">JZER &nbsp; &nbsp; &nbsp; &nbsp;otherwise&nbsp;</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">the&nbsp;jump&nbsp;does&nbsp;not&nbsp;happen</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">but&nbsp;the&nbsp;instruction&nbsp;is&nbsp;still&nbsp;used<br />JUMP &nbsp; &nbsp; &nbsp; &nbsp;done&nbsp;<br /></span></code></div></div></div><br />
If the value is not matched by any of the previous checks, the code uses 12 instructions:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp;val<br />EQ</span><span style="color: #007700">.</span><span style="color: #0000BB">C</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp; &nbsp;1<br />JZER &nbsp; &nbsp; &nbsp; &nbsp;range<br /></span><span style="color: #007700">CONST.</span><span style="color: #0000BB">pri &nbsp; 2<br />LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">alt &nbsp;val<br />SLEQ<br />PUSH</span><span style="color: #007700">.</span><span style="color: #0000BB">pri<br /></span><span style="color: #007700">CONST.</span><span style="color: #0000BB">pri &nbsp; 4<br />SGEQ<br />POP</span><span style="color: #007700">.</span><span style="color: #0000BB">alt<br /></span><span style="color: #007700">AND<br /></span><span style="color: #0000BB">JZER &nbsp; &nbsp; &nbsp; &nbsp;otherwise&nbsp;<br /></span></code></div></div></div><br />
The longer your chain is and the more failed checks there are, the more instructions the code uses. Each failed single value check adds 3 instructions and each failed range check adds 9 instructions.<br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="font-family: courier new;" class="mycode_font">switch</span></span></span></span><br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">val</span><span style="color: #007700">;<br /><br />switch&nbsp;(</span><span style="color: #0000BB">val</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;1</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;2&nbsp;</span><span style="color: #007700">..&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; default</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br />}&nbsp;<br /></span></code></div></div></div><br />
When using <span style="font-family: courier new;" class="mycode_font">switch</span>, the compiler generates a case table that contains the value and jump address for every single case, including the default case. Here is the assembly equivalent to this code:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">val</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #FF8000">#emit&nbsp;LOAD.S.pri&nbsp; &nbsp; val&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;load&nbsp;the&nbsp;value&nbsp;of&nbsp;val&nbsp;to&nbsp;the&nbsp;primary&nbsp;register<br />#emit&nbsp;SWITCH&nbsp; &nbsp; &nbsp; &nbsp; casetable&nbsp; &nbsp;//&nbsp;jump&nbsp;to&nbsp;the&nbsp;case&nbsp;table<br /><br />//&nbsp;case&nbsp;1:<br /></span><span style="color: #0000BB">single</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br />#emit&nbsp;JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;everything&nbsp;is&nbsp;done,&nbsp;jump&nbsp;to&nbsp;"done"<br /><br /><br /></span><span style="color: #0000BB">range</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br />#emit&nbsp;JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;everything&nbsp;is&nbsp;done,&nbsp;jump&nbsp;to&nbsp;"done"<br /><br /><br /></span><span style="color: #0000BB">otherwise</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;here<br />#emit&nbsp;JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;everything&nbsp;is&nbsp;done,&nbsp;jump&nbsp;to&nbsp;"done"<br /><br /><br /></span><span style="color: #0000BB">casetable</span><span style="color: #007700">:<br /></span><span style="color: #FF8000">#emit&nbsp;CASETBL<br />//&nbsp;default:<br />#emit&nbsp;CASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp;otherwise&nbsp;//&nbsp;the&nbsp;amount&nbsp;of&nbsp;case&nbsp;table&nbsp;items;&nbsp;the&nbsp;jump&nbsp;address&nbsp;of&nbsp;"default"<br />//&nbsp;case&nbsp;1:<br />#emit&nbsp;CASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp;single&nbsp; &nbsp; //&nbsp;the&nbsp;value&nbsp;and&nbsp;jump&nbsp;address&nbsp;of&nbsp;the&nbsp;case<br />//&nbsp;case&nbsp;2&nbsp;..&nbsp;4:<br />#emit&nbsp;CASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp;range<br />#emit&nbsp;CASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;range<br />#emit&nbsp;CASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp;range<br /><br /><br /></span><span style="color: #0000BB">done</span><span style="color: #007700">:&nbsp;<br /></span></code></div></div></div><br />
Whatever the value of <span style="font-family: courier new;" class="mycode_font">val</span> is 1, the code always uses just three instructions:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">LOAD</span><span style="color: #007700">.</span><span style="color: #0000BB">S</span><span style="color: #007700">.</span><span style="color: #0000BB">pri &nbsp;val<br />SWITCH &nbsp; &nbsp; &nbsp;casetable<br />JUMP &nbsp; &nbsp; &nbsp; &nbsp;done&nbsp;<br /></span></code></div></div></div><br />
The <span style="font-family: courier new;" class="mycode_font">SWITCH</span> instruction jumps to the case table, performs a linear search on the cases and jumps to the correct one. If the search does not find a matching case, it jumps to the default case instead. It is similar to the behaviour of chained <span style="font-family: courier new;" class="mycode_font">else if</span>s, but since it is done in native code instead of using AMX instructions, the performance is a lot better.<br />
<br />
<span style="color: RoyalBlue;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">When NOT to use <span style="font-family: courier new;" class="mycode_font">switch</span>?</span></span></span><br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Large ranges</span></span></span><br />
<br />
As seen before, case tables can only use single values as cases, which means that if you use a range of 10000 elements in your <span style="font-family: courier new;" class="mycode_font">switch</span>, the compiler will have to write 10000 entries to the case table and the runtime will have to search through 10000 entries. Using the following benchmarking script I determined that the runtime performance of a case table becomes worse than the one of a <span style="font-weight: bold;" class="mycode_b">single</span> <span style="font-family: courier new;" class="mycode_font">a &lt;= x &lt;= b</span> check at around 30 entries.<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #FF8000">#define&nbsp;MAX&nbsp;30<br />#define&nbsp;ITERATIONS&nbsp;1000000<br /><br /></span><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">tick&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">GetTickCount</span><span style="color: #007700">();<br /><br />for&nbsp;(new&nbsp;</span><span style="color: #0000BB">i</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">ITERATIONS</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">i</span><span style="color: #007700">++)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; switch&nbsp;</span><span style="color: #007700">((</span><span style="color: #0000BB">i&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">MAX</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; case&nbsp;1&nbsp;</span><span style="color: #007700">..&nbsp;</span><span style="color: #0000BB">MAX</span><span style="color: #007700">:&nbsp;{}<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br />}<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"switch:&nbsp;%i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">GetTickCount</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">tick</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">tick&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">GetTickCount</span><span style="color: #007700">();<br /><br />for&nbsp;(new&nbsp;</span><span style="color: #0000BB">i</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">ITERATIONS</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">i</span><span style="color: #007700">++)&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; if&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&lt;=&nbsp;(</span><span style="color: #0000BB">i&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">MAX</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">MAX</span><span style="color: #007700">)&nbsp;{}<br />}<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"if:&nbsp;%i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">GetTickCount</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">tick</span><span style="color: #007700">);&nbsp;<br /></span></code></div></div></div><br />
However, runtime performance is not the biggest issue. As seen from <a href="https://forum.sa-mp.com/showthread.php?t=660273" target="_blank" rel="noopener" class="mycode_url">this forum topic</a>, the amount of time it takes for the compiler to generate large case tables can be so long that it seems for the user that the compiler has ran into an infinite loop. Even ranges small enough to only have a small impact on the compilation time (for example, 1000 elements) can eventually make the compilation process painful if the delays stack up.<br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Floating point values</span></span></span><br />
<br />
When using <span style="font-family: courier new;" class="mycode_font">switch</span> with floating point values, the case table must also contain every single value within the range. The step between two cases grows as the values grow, but it starts at the smallest possible floating point value in the IEEE754 specification, which is <span style="font-family: courier new;" class="mycode_font">1.4E-45</span>. This means that each entry differs from the previous and next one by just <span style="font-family: courier new;" class="mycode_font">0.0000000000000000000000000000000000000000000014</span>.<br />
<br />
Some examples of ranges with the respective amounts of case table elements:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>|                       Range                       | Amount of entries |<br />
|---------------------------------------------------|-------------------|<br />
| 0.0 .. 0.0000000000000000000000000000000000000001 |       71363       |<br />
|                    1.0 .. 1.01                    |       83887       |<br />
|                   10.0 .. 10.1                    |       104859      |<br />
|                  100.0 .. 101.0                   |       131073      |<br />
|                 1000.0 .. 1010.0                  |       163841      |<br />
|                10000.0 .. 10100.0                 |       102401      |<br />
|               100000.0 .. 101000.0                |       128001      |</code></div></div><br />
This test should be enough to show that using <span style="font-family: courier new;" class="mycode_font">switch</span> with floating point values relevant in the context of SA-MP (coordinates, health, etc.) is completely unreasonable.<br />
<br />
<span style="color: RoyalBlue;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">When to use <span style="font-family: courier new;" class="mycode_font">switch</span>?</span></span></span><br />
<br />
I would say that everywhere where there are chains of comparisons against constant values. I have seen people saying that <span style="font-family: courier new;" class="mycode_font">switch</span> is faster no matter what and using a <span style="font-family: courier new;" class="mycode_font">switch</span> with two cases is much faster than an <span style="font-family: courier new;" class="mycode_font">if</span>-<span style="font-family: courier new;" class="mycode_font">else</span>. However, their runtime performance is about the same and where an <span style="font-family: courier new;" class="mycode_font">if</span> and an <span style="font-family: courier new;" class="mycode_font">else</span> make more sense, they should be used instead.<br />
<br />
<span style="color: RoyalBlue;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Tips and tricks</span></span></span><br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Using <span style="font-family: courier new;" class="mycode_font">switch</span> with <span style="font-family: courier new;" class="mycode_font">floatcmp</span> to compare floating point values</span></span></span><br />
<br />
Comparison operators for variables with the <span style="font-family: courier new;" class="mycode_font">Float</span> tag are overloaded to use the <span style="font-family: courier new;" class="mycode_font">floatcmp</span> native instead of comparing them with AMX instructions. When comparing floating point values to eachother and having different outcomes depending of if one of the values is larger than the other or they are equal, you can save a <span style="font-family: courier new;" class="mycode_font">floatcmp</span> call by comparing them using <span style="font-family: courier new;" class="mycode_font">switch</span> instead. <span style="font-family: courier new;" class="mycode_font">floatcmp</span> returns <span style="font-family: courier new;" class="mycode_font">0</span> if the values are equal, <span style="font-family: courier new;" class="mycode_font">1</span> if the first value is larger and <span style="font-family: courier new;" class="mycode_font">-1</span> if the second value is larger, so the following snippets of code are equivalent, but the second one performs better:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">a&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">b</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #FF8000">//&nbsp;floatcmp&nbsp;called&nbsp;implicitly<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;is&nbsp;larger&nbsp;than&nbsp;b<br /></span><span style="color: #007700">}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">a&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">b</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #FF8000">//&nbsp;floatcmp&nbsp;called&nbsp;implicitly<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;is&nbsp;smaller&nbsp;than&nbsp;b<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;and&nbsp;b&nbsp;are&nbsp;equal<br /></span><span style="color: #007700">}&nbsp;<br /></span></code></div></div></div><br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">floatcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">b</span><span style="color: #007700">))&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;1</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;is&nbsp;larger&nbsp;than&nbsp;b<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;is&nbsp;smaller&nbsp;than&nbsp;b<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;0</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; &nbsp; &nbsp; </span><span style="color: #FF8000">//&nbsp;a&nbsp;and&nbsp;b&nbsp;are&nbsp;equal<br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br />}&nbsp;<br /></span></code></div></div></div><br />
<span style="color: DeepSkyBlue;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Using <span style="font-family: courier new;" class="mycode_font">switch</span> to compare strings</span></span></span><br />
<br />
Comparing strings with <span style="font-family: courier new;" class="mycode_font">strcmp</span> has been notorious being both slow and tedious for a long time. Although most of that bad reputation came when ZCMD became the goto command processor and <span style="font-family: courier new;" class="mycode_font">strcmp</span> is still very useful elsewhere, there is a grain of truth in every joke. When comparing a string to a long chain of other strings, comparing their hashes would be more efficient and also convenient due to the ability to use <span style="font-family: courier new;" class="mycode_font">switch</span>, because the hashes are in the form of integers. The PAWN language does not support such thing natively, but y_stringhash from YSI does just the job. According to <a href="https://forum.sa-mp.com/showpost.php?p=3901202&amp;postcount=4" target="_blank" rel="noopener" class="mycode_url">Y_Less’ tests</a>, comparing strings using hashes becomes more efficient than using <span style="font-family: courier new;" class="mycode_font">strcmp</span> at around 10 comparisons. More information about y_stringhash and its usage can be found from <a href="https://forum.sa-mp.com/showthread.php?t=571305" target="_blank" rel="noopener" class="mycode_url">this topic</a>.<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">number</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"one"</span><span style="color: #007700">))&nbsp;{<br /><br />}&nbsp;else&nbsp;if&nbsp;(!</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">number</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">)&nbsp;||&nbsp;!</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">number</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">))&nbsp;{<br /><br />}&nbsp;else&nbsp;{<br /><br />}&nbsp;<br /></span></code></div></div></div><br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">YHash</span><span style="color: #007700">(</span><span style="color: #0000BB">number</span><span style="color: #007700">))&nbsp;{<br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;_H</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">one</span><span style="color: #007700">&gt;:&nbsp;{<br /><br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; case&nbsp;_H</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">two</span><span style="color: #007700">&gt;,&nbsp;</span><span style="color: #0000BB">_H</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">three</span><span style="color: #007700">&gt;:&nbsp;{<br /><br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB"> &nbsp; default</span><span style="color: #007700">:&nbsp;{<br /><br /></span><span style="color: #0000BB"> &nbsp; </span><span style="color: #007700">}<br />}&nbsp;<br /></span></code></div></div></div><br />
<span style="color: RoyalBlue;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b">Credits</span></span></span><br />
<ul class="mycode_list"><li>Yashas for the excellent <a href="https://github.com/YashasSamaga/AMX-Assembly-Docs" target="_blank" rel="noopener" class="mycode_url">AMX Assembly documentation</a>.<br />
</li>
<li>Y_Less for reviewing the tutorial prior to me publishing it.<br />
</li>
<li>Users of the SA-MP Discord for productive conversations on this topic.<br />
</li>
</ul>

	</div>
	
	
	<div class="post_meta" id="post_meta_3160">
		
	</div>
</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search64c3.html?action=finduser&amp;uid=16" title="Find all posts by this user" class="postbit_find"><i class="fa fa-search"></i></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply3db0.html?tid=322&amp;replyto=3160" title="Quote this message in a reply" class="postbit_quote"><i class="fa fa-comment"></i></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit -->
	</div>
</td></tr>
		<tr>
			<td class="tfoot">
				<!-- start: showthread_search -->
	<div class="float_right">
		<form action="https://www.burgershot.gg/search.php" method="post">
			<input type="hidden" name="action" value="thread" />
			<input type="hidden" name="tid" value="322" />
			<input type="text" name="keywords" value="Enter Keywords" onfocus="if(this.value == 'Enter Keywords') { this.value = ''; }" onblur="if(this.value=='') { this.value='Enter Keywords'; }" class="textbox" size="25" />
			<input type="submit" class="button" value="Search Thread" />
		</form>
	</div>
<!-- end: showthread_search -->
				<div style="padding:10px">
					<strong>&laquo; <a href="showthread51ee.html?tid=322&amp;action=nextoldest">Next Oldest</a> | <a href="showthread89e6.html?tid=322&amp;action=nextnewest">Next Newest</a> &raquo;</strong><br>
				</div>
			</td>
		</tr>
	</table>
	<div class="float_left"><br>
		
	</div>
	<br class="clear" />
	
	
	
	<br />
	<div class="float_left">
		<ul class="thread_tools">
			<li class="printable"><a href="printthreadee38.html?tid=322">View a Printable Version</a></li>
			
			<li class="subscription_add"><a href="usercp937b.html?action=addsubscription&amp;tid=322&amp;my_post_key=6428f000919b5d9a18f82d476f6b077e">Subscribe to this thread</a></li>
			
		</ul>
	</div>

	<div class="float_right" style="text-align: right;">
		
		<!-- start: forumjump_advanced -->
<form action="https://www.burgershot.gg/forumdisplay.php" method="get">
<span class="smalltext"><strong>Forum Jump:</strong></span>
<select name="fid" class="forumjump">
<option value="-4">Private Messages</option>
<option value="-3">User Control Panel</option>
<option value="-5">Who's Online</option>
<option value="-2">Search</option>
<option value="-1">Forum Home</option>
<!-- start: forumjump_bit -->
<option value="19" > General</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="20" >-- Chat</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="21" >-- Tech</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="22" >-- Life</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="48" >-- Art</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="56" >-- Programming</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="40" > open.mp</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="43" >-- Development Updates</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="42" >-- Questions and Suggestions</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="3" > SA-MP</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="6" >-- General Discussions</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="9" >-- Videos and Screenshots</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="12" >-- Support</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="10" >-- Pawn Scripting</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="37" selected="selected">-- Tutorials</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="13" >-- Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="32" >---- Plugins</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="31" >---- Libraries</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="30" >---- Filterscripts</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="33" >---- Gamemodes</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="67" >---- Maps</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="69" >-- Advertisements </option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="23" > Other languages</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="24" >-- Spanish/Español</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="51" >---- Programación</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="52" >---- Discusión GTA SA Multijugador</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="53" >---- Mods</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="54" >---- Offtopic</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="55" >---- Juegos</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="25" >-- Portuguese/Português</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="26" >-- Russian/Русский</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="28" >-- Italian/Italiano</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="29" >-- Dutch/Nederlands</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="34" >-- German/Deutsch</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="35" >-- Romanian/Română</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="36" >-- Ex-Yu</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="38" >-- Polish/Polski</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="44" >---- Ogólne</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="45" >---- Serwery</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="46" >---- Skryptowanie</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="47" >---- Filmiki i zdjęcia</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="39" >-- Lithuanian/Lietuviškas</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="49" >-- French/Français</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="50" >-- Hungarian/Magyar</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="57" >-- Hindi/Urdu</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="68" >-- Turkish</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="27" >-- Other</option>
<!-- end: forumjump_bit -->
</select>
<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
<script type="text/javascript">
$(".forumjump").on('change', function() {
	var option = $(this).val();

	if(option < 0)
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
	else
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
});
</script>
<!-- end: forumjump_advanced -->
	</div>
	<br class="clear" />
	<!-- start: footer -->
    </div>
</div>
<footer class="footer-distributed">
	<div class="footer-left">
		<p style="" class="footer-links">
			© Burgershot - Powered by our <a href="index.html" style="font-weight: bold; font-family: Noto Sans;">Community</a> and <a style="font-weight: bold; font-family: Noto Sans;" href="https://www.mybb.com/"> MyBB</a>
            <span style="display:block;color: #9f9f9f;font-family: Noto Sans;"><small style="font-size: 12px;">Original Theme by Emerald</small></span>                                     
	    </p>
	</div>
    <div style="" class="footer-right">
        <div class="footer-icons">
		</div>
                
		<!-- start: footer_themeselect -->
<div class="theme">
<form method="POST" action="https://www.burgershot.gg/showthread.php" id="theme_select">
	<input type="hidden" name="pid" value="3160" />

	<input type="hidden" name="my_post_key" value="6428f000919b5d9a18f82d476f6b077e" />
	<!-- start: footer_themeselector -->
<select name="theme" onchange="MyBB.changeTheme();">
<optgroup label="Quick Theme Select">
<!-- start: usercp_themeselector_option -->
<option value="2">MyBB Default Theme</option>
<!-- end: usercp_themeselector_option --><!-- start: usercp_themeselector_option -->
<option value="3">Burgershot Theme</option>
<!-- end: usercp_themeselector_option --><!-- start: usercp_themeselector_option -->
<option value="9">--Light</option>
<!-- end: usercp_themeselector_option -->
</optgroup>
</select>
<!-- end: footer_themeselector -->
	<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
</div>
<!-- end: footer_themeselect -->
	</div>
</footer>
<script>
	if (connected == 0) { 
        jQuery("#mobile_member").html("<a href='member456e.html?action=login'>Login</a> - <a href='member0ddc.html?action=register'>Register</a>"); 
    }
	if (connected == 1) { 
        document.getElementById("mobile_member").innerHTML = '<a title="Inbox" href="private.html">Inbox</a> - <a title="User CP" href="usercp.html">User CP</a> - <a title="Log Out" href="member2385.html?action=logout&amp;logoutkey=">Logout</a>'; 
    }
</script>
<!-- end: footer -->
	<div id="thread_modes_popup" class="popup_menu" style="display: none;"><div class="popup_item_container"><a href="showthread2424.html?mode=linear&amp;tid=322&amp;pid=3160#pid3160" class="popup_item">Linear Mode</a></div><div class="popup_item_container"><a href="showthread2db3.html?mode=threaded&amp;tid=322&amp;pid=3160#pid3160" class="popup_item">Threaded Mode</a></div></div>
	<script type="text/javascript">
	// <!--
		if(use_xmlhttprequest == "1")
		{
			$("#thread_modes").popupMenu();
		}
	// -->
	</script>
	<script type="text/javascript">
		$(".author_avatar img").error(function () {
			$(this).unbind("error").closest('.author_avatar').remove();
		});
	</script>
</body>
</html>
<!-- end: showthread -->