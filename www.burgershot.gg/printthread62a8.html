<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><!-- start: printthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Pawn YSI Daily Tips - Printable Version</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
body { font-family: Verdana, Arial, sans-serif; font-size: 13px; }
.largetext { font-family: Verdana, Arial, sans-serif; font-size: medium; font-weight: bold; }
img { max-width: 100%; height: auto; }
</style>
</head>
<body>
<table width="98%" align="center">
<tr>
<td valign="top"><a href="index-2.html"><img src="images/emerald/logo.html" alt="Burgershot" title="Burgershot" border="0" /></a></td>
</tr>
<tr>
<td>
<span class="largetext"><span style="color: #ff7c7c;font-weight: bold;">[Pawn]</span> <a href="showthread62a8.html?tid=1972">YSI Daily Tips</a> - Printable Version</span><br />
<br />
+- Burgershot (<em>https://www.burgershot.gg</em>)<br />
<!-- start: printthread_nav -->
+-- Forum: SA-MP (<i>https://www.burgershot.gg/forumdisplay.php?fid=3</i>)<br />
<!-- end: printthread_nav --><!-- start: printthread_nav -->
+--- Forum: Pawn Scripting (<i>https://www.burgershot.gg/forumdisplay.php?fid=10</i>)<br />
<!-- end: printthread_nav -->
+--- Thread: <span style="color: #ff7c7c;font-weight: bold;">[Pawn]</span> YSI Daily Tips (<em>/showthread.php?tid=1972</em>)<br />
<br />
<!-- start: printthread_multipage -->
<div class="multipage">Pages: <strong></strong> <!-- start: printthread_multipage_page_current -->
<strong>1</strong>
<!-- end: printthread_multipage_page_current --><!-- start: printthread_multipage_page -->
<a href="printthreadddaf.html?tid=1972&amp;page=2">2</a>
<!-- end: printthread_multipage_page --></div>
<!-- end: printthread_multipage --></td>
</tr>
<tr>
<td><br /><hr size="1" /><!-- start: printthread_post -->
<strong>YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<div style="text-align: center;" class="mycode_align"><span style="color: Red;" class="mycode_color"><span style="font-size: xx-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">YSI Daily Tips</span></span></span></span></span></div>
<br />
Almost every time I mention something about YSI someone says "oh, I didn't know it could do that".  This is maybe my fault for incomplete/deleted documentation, so I'm going to start writing one random snippet about YSI every day.  Hopefully these will all help you simplify your modes and improve your scripting.  I've also ported over the tips from the old <span style="font-style: italic;" class="mycode_i">YSI Secrets</span> thread on the SA:MP forum.  If you have any suggestions, questions, or your own YSI hints, feel free to share them here.<br />
<br />
<span style="color: Red;" class="mycode_color">WARNING:  Don't copy and paste the examples</span><br />
<br />
In order to get both indentation and syntax highlighting showing up, the "tabs" you see are actually underscores with the same colour as the background.  If you copy text verbatim from this thread, you'll come away with extra characters you don't want.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-14: GLOBAL_TAG_TYPES</span></span></span></span></span><br />
<br />
This is used in place of tags for variable argument functions. For example, “printf” is defined as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">native</span> printf(<span style="color: DeepSkyBlue;" class="mycode_color">const</span> format[], {Float,_}:...);<br />
</span></blockquote>
<br />
Using <span style="font-family: courier new;" class="mycode_font">{Float, _}:</span> means that this function can accept a range of <span style="font-family: courier new;" class="mycode_font">Float</span> and <span style="font-family: courier new;" class="mycode_font">_</span> (normal) variables. But what about <span style="font-family: courier new;" class="mycode_font">Text:</span> or <span style="font-family: courier new;" class="mycode_font">Group:</span> or <span style="font-family: courier new;" class="mycode_font">Menu:</span>? You could write:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">native</span> printf(<span style="color: DeepSkyBlue;" class="mycode_color">const</span> format[], {Float, Text, Menu, _}:...);<br />
</span></blockquote>
<br />
To avoid getting tag mismatch warnings when trying to print those variable types, or you can do:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">native</span> printf(<span style="color: DeepSkyBlue;" class="mycode_color">const</span> format[], GLOBAL_TAG_TYPES:...);<br />
</span></blockquote>
<br />
Which is defined in YSI as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
{_,Bit,Text,Group,File,Float,Text<span style="color: Orange;" class="mycode_color">3</span>D}<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-15: PP_LOOP</span></span></span></span></span><br />
<br />
<span style="font-family: courier new;" class="mycode_font">PP_LOOP</span> is a pre-processor loop, so generates multiple blocks of code. For example:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
PP_LOOP&lt;<span style="color: Orange;" class="mycode_color">5</span>&gt;(printf(<span style="color: Red;" class="mycode_color">"hi"</span>);)()<br />
</span></blockquote>
<br />
Will compile as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
printf(<span style="color: Red;" class="mycode_color">"hi");printf("hi");printf("hi");printf("hi");printf("hi"</span>);<br />
</span></blockquote>
<br />
The definition of this macro is:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
PP_LOOP&lt;loop count&gt;(output)(separator)<br />
</span></blockquote>
<br />
The separator goes BETWEEN instances of “output”, but not at the end. So you can make a list as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
PP_LOOP&lt;<span style="color: Orange;" class="mycode_color">10</span>&gt;(<span style="color: Orange;" class="mycode_color">55</span>)(, )<br />
</span></blockquote>
<br />
And that will compile as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span>, <span style="color: Orange;" class="mycode_color">55</span><br />
</span></blockquote>
<br />
Note the lack of “, ” on the end because that’s not separating anything.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-16: __COMPILER_PASS</span></span></span></span></span><br />
<br />
The PAWN compiler does TWO pre-processing stages. It’s rare that this is a problem, but if you need to know which stage is being run you can do:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#if __COMPILER_PASS == 0</span><br />
<span style="color: Brown;" class="mycode_color">#else</span> <span style="color: Green;" class="mycode_color">// 1 for second pass.</span><br />
<span style="color: Brown;" class="mycode_color">#endif</span><br />
</span></blockquote>
<br />
Alternatively:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#if COMPILER_1ST_PASS</span><br />
<span style="color: Brown;" class="mycode_color">#else</span> <span style="color: Green;" class="mycode_color">// Or COMPILER_2ND_PASS</span><br />
<span style="color: Brown;" class="mycode_color">#endif</span><br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-17: y_cell</span></span></span></span></span><br />
<br />
This is a library for fast bit-manipulation of cells:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_ReverseBits(cell);<br />
</span></blockquote>
<br />
Reverse all the bits in a cell:<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b11110000000000000000000000000000</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000001111</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b10110011100011110000111110000010</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0b01000001111100001111000111001101</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b01010101010101010101010101010101</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0b10101010101010101010101010101010</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_ReverseNibbles(cell);<br />
</span></blockquote>
<br />
Reverse all the nibbles in a cell:<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0x12345678</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x87654321</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0x010F0703</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x3070F010</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0xF0F0F0F0</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x0F0F0F0F</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_ReverseBytes(cell);<br />
</span></blockquote>
<br />
Reverse all the bytes in a cell:<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0x12345678</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x78563412</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0x01020304</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x04030201</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0xFF00FF00</span> Becomes: <span style="font-family: courier new;" class="mycode_font">0x00FF00FF</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_CountBits(cell);<br />
</span></blockquote>
<br />
Count all the <span style="font-family: courier new;" class="mycode_font">1</span>s in a cell.<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0</span> Returns: <span style="font-family: courier new;" class="mycode_font">0</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">1</span> Returns: <span style="font-family: courier new;" class="mycode_font">1</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0x01010101</span> Returns: <span style="font-family: courier new;" class="mycode_font">4</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_GetLowestBit(cell);<br />
</span></blockquote>
<br />
Returns a number between 0 and 31, representing the least significant set bit in a cell:<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000000001</span> Returns: <span style="font-family: courier new;" class="mycode_font">0</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000001000</span> Returns: <span style="font-family: courier new;" class="mycode_font">3</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00010001100011000011100010001000</span> Returns: <span style="font-family: courier new;" class="mycode_font">3</span><br />
<br />
<span style="color: Red;" class="mycode_color">WARNING:  This function returns 0 if there are no bits set AND if the lowest bit is 1</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Cell_GetLowestComponent(cell);<br />
</span></blockquote>
<br />
Returns the lowest set bit in a cell:<br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000000001</span> Returns: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000000001</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000001000</span> Returns: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000001000</span><br />
<br />
Example: <span style="font-family: courier new;" class="mycode_font">0b00010001100011000011100010001000</span> Returns: <span style="font-family: courier new;" class="mycode_font">0b00000000000000000000000000001000</span>
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-18: Keywords</span></span></span></span></span><br />
<br />
Most people know that YSI adds <span style="font-family: courier new;" class="mycode_font">foreach</span> to the PAWN language, but here is a list of other keywords added by it:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">foreach</span> - Efficiently looping over sparse arrays and iterators.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">foreach</span> (<span style="color: Blue;" class="mycode_color">new</span> i : Player) printf(<span style="color: Red;" class="mycode_color">"Player %d"</span>, i);<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">task</span> - Timer function that is always running as long as the server is up.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">task</span> Ping[<span style="color: Orange;" class="mycode_color">1000</span>]()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>printf(<span style="color: Red;" class="mycode_color">"Ping"</span>);<br />
}<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">ptask</span> - Similar to “task”, but has a “playerid” parameter.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">ptask</span> PlayerPing[<span style="color: Orange;" class="mycode_color">1000</span>](playerid)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>printf(<span style="color: Red;" class="mycode_color">"Ping %d"</span>, playerid);<br />
}<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">loadtext</span> - Load localised string data for displaying text.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">loadtext</span> core[ysi_properties];<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">remote</span> - A public function that can be called from other scripts with compile-time parameter checking.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">remote</span> MyFunc(a, b[])<br />
{<br />
}<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">broadcastfunc</span> - Call a remote function in all other scripts.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">broadcastfunc</span> MyFunc(<span style="color: Orange;" class="mycode_color">42</span>, <span style="color: Red;" class="mycode_color">"Hello World."</span>);<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">inline</span> - Declare a function inside another function, and get access to the enclosing function’s variables.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">stock</span> Outer(a)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Inner(b)<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: #FBFBFB;" class="mycode_color">____</span>printf(<span style="color: Red;" class="mycode_color">"%d %d"</span>, a, b);<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>}<br />
}<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">using</span> - Pass an inline function to another function as a callback.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
INI_Parse(file, <span style="color: Blue;" class="mycode_color">using</span> <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Local_Parse);<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">hook</span> - Use a callback multiple times in multiple files without conflict.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">hook</span> OnPlayerConnect(playerid)<br />
{<br />
}<br />
</span></blockquote>
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">global</span> - When running multiple scripts, only one should be in charge of, say, the anti-cheat. This declares a function as “global”, such that all scripts can use it but only one script will be in charge.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">global</span> AC_GiveWeapon(playerid, weaponid, ammo)<br />
{<br />
}<br />
</span></blockquote>
<br />
<span style="font-family: courier new;" class="mycode_font">remote</span> functions are called in ALL other scripts, <span style="font-family: courier new;" class="mycode_font">global</span> functions are called in just one.<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">foreign</span> - Goes with <span style="font-family: courier new;" class="mycode_font">global</span> to inform a script that this function is in a different script.<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">foreign</span> AC_GiveWeapon(playerid, weaponid, ammo);<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-19: OnScriptInit</span></span></span></span></span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">public</span> OnScriptInit()<br />
{<br />
}<br />
</span></blockquote>
<br />
This is like <span style="font-family: courier new;" class="mycode_font">OnGameModeInit</span> or <span style="font-family: courier new;" class="mycode_font">OnFilterScriptInit</span>, but works the same in both (i.e. is called once at the start, regardless of the script type).  It can't do anything those callbacks can't do, just makes writing libraries more consistent.  Basically it is a good option for initialisation code in an include as then it doesn’t matter where your include is used.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-20: OnScriptExit</span></span></span></span></span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">public</span> OnScriptExit()<br />
{<br />
}<br />
</span></blockquote>
<br />
This is like <span style="font-family: courier new;" class="mycode_font">OnGameModeExit</span> and <span style="font-family: courier new;" class="mycode_font">OnFilterScriptExit</span>, but works the same in both (i.e. is called once at the end, regardless of the script type).  It can't do anything those callbacks can't do, just makes writing libraries more consistent.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-21: Dynamic Memory Allocation</span></span></span></span></span><br />
<br />
Using YSI you can allocate and free memory when you like (and as much as you like):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
func(arr[], size)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">for</span> (<span style="color: Blue;" class="mycode_color">new</span> i = <span style="color: Orange;" class="mycode_color">0</span>; i != size; ++i) printf(<span style="color: Red;" class="mycode_color">"%d"</span>, arr[i]);<br />
}<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">new</span> Alloc:a = malloc(<span style="color: Orange;" class="mycode_color">1000</span>); <span style="color: Green;" class="mycode_color">// Allocate 1000 cells.</span><br />
<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>mset(a, <span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">50</span>); <span style="color: Green;" class="mycode_color">// Write <span style="color: Red;" class="mycode_color">"50"</span> to the first slot.</span><br />
<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Pass our newly allocated array to a function.</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>func(mget(a, <span style="color: Orange;" class="mycode_color">0</span>), Malloc_SlotSize(a));<br />
<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Free the memory (or we will eventually run out).</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>free(a);<br />
}<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-22: Restricting Connections</span></span></span></span></span><br />
<br />
You can limit how many people can connect to your server from the same IP:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
SetMaxConnections(<span style="color: Orange;" class="mycode_color">3</span>);<br />
</span></blockquote>
<br />
That lets 3 people connect from the same IP. If any more try join they will fail to connect. You can also change what happens when too many people join:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
SetMaxConnections(<span style="color: Orange;" class="mycode_color">5</span>, e_FLOOD_ACTION_BAN);<br />
</span></blockquote>
<br />
That will ban an IP if more than 5 people try to connect from it. The available actions are:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">e_FLOOD_ACTION_BLOCK</span> - Don’t let any more connect (default).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">e_FLOOD_ACTION_KICK</span> - Kick everyone using that IP.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">e_FLOOD_ACTION_BAN</span> - Ban the IP (the players will time out).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">e_FLOOD_ACTION_FBAN</span> - Ban the IP and instantly kick all the players on that IP.<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-23: Temp Variables</span></span></span></span></span><br />
<br />
Sometimes you need a variable for a fraction of a second (or just a few expressions). YSI has 3 of these “temp” variables already to avoid creating more:<span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="195059">[email&#160;protected]</a></span>, <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="440e04">[email&#160;protected]</a></span>, and <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="0d5c4d">[email&#160;protected]</a>[YSI_MAX_STRING]</span>.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define ReturnPlayerHealth(%0) (GetPlayerHealth((%0), Float:<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="327b72">[email&#160;protected]</a>), Float:<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="5c151c">[email&#160;protected]</a>)</span><br />
</span></blockquote>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define ReturnPlayerName(%0) (GetPlayerName((%0), <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="c59485">[email&#160;protected]</a>, 24), <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="b3e2f3">[email&#160;protected]</a>)</span><br />
</span></blockquote>
<br />
These variables can NOT be relied upon over function calls, so this might not work:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="460c06">[email&#160;protected]</a> = j;<br />
GetSomeData();<br />
printf(<span style="color: Red;" class="mycode_color">"%d"</span>, <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="317b71">[email&#160;protected]</a>);<br />
</span></blockquote>
<br />
<span style="font-family: courier new;" class="mycode_font">GetSomeData</span> might modify <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="511b11">[email&#160;protected]</a></span> and you would never know. These are purely for getting some data then using it pretty much straight away.<br />
<br />
There is also another one of these short variables: <span style="font-family: courier new;" class="mycode_font">@_</span> (yes, the variable is called <span style="font-family: courier new;" class="mycode_font">&lt;at&gt;&lt;underscore&gt;</span>). This is the <span style="font-style: italic;" class="mycode_i">Master ID</span> for a script. All currently running scripts have an ID.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-24: Short Functions</span></span></span></span></span><br />
<br />
Speaking of short variables, there are some short functions too. These are used in complex macros to reduce the length of the generated code to fit in tight line-length restrictions:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="a2f7e2">[email&#160;protected]</a></span> - setproperty<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="c79187">[email&#160;protected]</a></span> - getproperty<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="025542">[email&#160;protected]</a></span> - CallRemoteFunction<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="8ac5ca">[email&#160;protected]</a></span> - SetTimerEx<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-25: Debug Prints</span></span></span></span></span><br />
<br />
If you compile a YSI mode with “_DEBUG” set, you get a load of information in the compiler window. This macro means that the prints are ONLY included at the correct level and not any other time, so using “_DEBUG 0” (or none at all) will strip all the print statements from the mode for the best performance.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define _DEBUG 3</span><br />
<br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Library\y_whatever&gt;</span><br />
</span></blockquote>
<br />
The number after <span style="font-family: courier new;" class="mycode_font">_DEBUG</span> is the <span style="font-style: italic;" class="mycode_i">debug level</span> (default <span style="font-family: courier new;" class="mycode_font">0</span>) and there are 8 levels:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">0</span> - No debugging.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">1</span> - Show public function calls (callbacks and timers).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">2</span> - Show API function calls (main YSI functions).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">3</span> - Show stock function calls (secondary YSI functions).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">4</span> - Show internal function calls.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">5</span> - Show function branches (extra debug information within functions).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">6</span> - Show loop repeats (prints within loops).<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">7</span> - Show extra loops (even more prints in loops).<br />
</li>
</ul>
<br />
I will warn you - use level 7 VERY rarely, even I try to avoid it as it generates several Mb of log data just for STARTING your server!<br />
<br />
To output your own debug prints use <span style="font-family: courier new;" class="mycode_font">P:&lt;number&gt;(message)</span><br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:<span style="color: Orange;" class="mycode_color">5</span>(<span style="color: Red;" class="mycode_color">"This will be printed at debug levels <span style="color: Orange;" class="mycode_color">5</span> and higher."</span>);<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-26: Special Prints</span></span></span></span></span><br />
<br />
Besides the 8 levels mentioned above, there are some special levels:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:F(<span style="color: Red;" class="mycode_color">"Fatal error message"</span>);<br />
<span style="color: Green;" class="mycode_color">// Prints <span style="color: Red;" class="mycode_color">"* YSI Fatal Error: &lt;your message&gt;"</span></span><br />
<span style="color: Green;" class="mycode_color">// Beeps 5 times to alert the user.</span><br />
</span></blockquote>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:E(<span style="color: Red;" class="mycode_color">"Error message"</span>);<br />
<span style="color: Green;" class="mycode_color">// Prints <span style="color: Red;" class="mycode_color">"* YSI Error: &lt;your message&gt;"</span></span><br />
<span style="color: Green;" class="mycode_color">// Beeps 3 times to alert the user.</span><br />
</span></blockquote>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:W(<span style="color: Red;" class="mycode_color">"Warning message"</span>);<br />
<span style="color: Green;" class="mycode_color">// Prints <span style="color: Red;" class="mycode_color">"* YSI Warning: &lt;your message&gt;"</span></span><br />
<span style="color: Green;" class="mycode_color">// Beeps 1 time to alert the user.</span><br />
</span></blockquote>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:I(<span style="color: Red;" class="mycode_color">"Info message"</span>);<br />
<span style="color: Green;" class="mycode_color">// Prints <span style="color: Red;" class="mycode_color">"* YSI Info: &lt;your message&gt;"</span></span><br />
<span style="color: Green;" class="mycode_color">// Very similar to doing <span style="color: Red;" class="mycode_color">"P:0"</span> (which is a thing).</span><br />
</span></blockquote>
<br />
These special prints are ALWAYS compiled because they give the user important information about errors in code, and not just random debug information. However, they can be suppressed by doing:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">state</span> ysi_debug : off;<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-27: Dynamic Prints</span></span></span></span></span><br />
<br />
A recent addition to <span style="font-style: italic;" class="mycode_i">y_debug</span> added level <span style="font-family: courier new;" class="mycode_font">-1</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define _DEBUG -1</span><br />
</span></blockquote>
<br />
This activates run-time debug level selection, so doing:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
P:<span style="color: Orange;" class="mycode_color">3</span>(<span style="color: Red;" class="mycode_color">"Message"</span>);<br />
</span></blockquote>
<br />
Compiles as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (gDebugLevel &gt;= <span style="color: Orange;" class="mycode_color">3</span>) printf(<span style="color: Red;" class="mycode_color">"Message"</span>);<br />
</span></blockquote>
<br />
You can then change the level at run-time with:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
DebugLevel(<span style="color: Orange;" class="mycode_color">3</span>);<br />
</span></blockquote>
<br />
Disable most printing (except special ones - see above) with:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
DebugLevel(<span style="color: Orange;" class="mycode_color">0</span>);<br />
</span></blockquote>
<br />
And get the current debug level with:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> level = DebugLevel();<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-28: Special Tags</span></span></span></span></span><br />
<br />
YSI introduces two special tags for functions. These can be used to optimise code in some instances:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">void</span> - People familiar with “C” might recognise this as “no return”, i.e. the function doesn’t return anything:<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
void:Func()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// No return.</span><br />
}<br />
</span></blockquote>
<br />
When using <span style="font-style: italic;" class="mycode_i">y_master</span>, this will actually make the generated code faster, and give an error if you put “return” in your function and try use that return value. Technically you can still have “return”, you just can’t use the value.<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">string</span> - This is used all over YSI, not just as a return type. Anything with a “string:” tag is just a normal string, and entirely compatible with regular strings, but there are times when it is useful for the compiler to know the difference between an array and a string:<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
string:Func(string:a[], b[])<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Function that takes a string (a) and an array (b), and returns a string.</span><br />
}<br />
</span></blockquote>
<br />
This is used extensively with YSI keywords - <span style="font-family: courier new;" class="mycode_font">timer</span>, <span style="font-family: courier new;" class="mycode_font">global</span>, <span style="font-family: courier new;" class="mycode_font">inline</span>, and <span style="font-family: courier new;" class="mycode_font">remotefunc</span> all rely on <span style="font-family: courier new;" class="mycode_font">string:</span> to generate code that uses <span style="font-family: courier new;" class="mycode_font">"s"</span> instead of <span style="font-family: courier new;" class="mycode_font">"a"</span> (arrays must be followed by a length parameter, strings needn’t be).
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-29: IS_IN_RANGE</span></span></span></span></span><br />
<br />
If you have some code like this:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (a &gt;= <span style="color: Orange;" class="mycode_color">0</span> &amp;&amp; a &lt; <span style="color: Orange;" class="mycode_color">10</span>)<br />
</span></blockquote>
<br />
Or the much better:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (<span style="color: Orange;" class="mycode_color">0</span> &lt;= a &lt; <span style="color: Orange;" class="mycode_color">10</span>)<br />
</span></blockquote>
<br />
You can now use YSI to do it an even better way:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (IS_IN_RANGE(a, <span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">10</span>))<br />
</span></blockquote>
<br />
This checks that the first parameter is AT LEAST the second parameter, and SMALLER than the third parameter, and is faster than the other two methods. If you want to change the ranges, add or subtract 1. For example to check if something is a numeric character do:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (IS_IN_RANGE(character, '<span style="color: Orange;" class="mycode_color">0</span>', '<span style="color: Orange;" class="mycode_color">9</span>' + <span style="color: Orange;" class="mycode_color">1</span>))<br />
</span></blockquote>
<br />
That will do:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> ('<span style="color: Orange;" class="mycode_color">0</span>' &lt;= character &lt;= '<span style="color: Orange;" class="mycode_color">9</span>')<br />
</span></blockquote>
<br />
Or more strictly it will do:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> ('<span style="color: Orange;" class="mycode_color">0</span>' &lt;= character &lt; '<span style="color: Orange;" class="mycode_color">9</span>' + <span style="color: Orange;" class="mycode_color">1</span>)<br />
</span></blockquote>
<br />
These being integers, those are the same (they aren’t for floats).
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-04-30: RUN_TIMING</span></span></span></span></span><br />
<br />
This is a simplified way to get many statistics comparing two bits of [pawn]<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
RUN_TIMING(<span style="color: Red;" class="mycode_color">"Version <span style="color: Orange;" class="mycode_color">1</span> (+)"</span>)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>a = b + <span style="color: Orange;" class="mycode_color">5</span>;<br />
}<br />
<br />
RUN_TIMING(<span style="color: Red;" class="mycode_color">"Version <span style="color: Orange;" class="mycode_color">2</span> (+=)"</span>)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>a = b;<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>a += <span style="color: Orange;" class="mycode_color">5</span>;<br />
}<br />
</span></blockquote>
<br />
Will output something like:<br />
<br />
<span style="font-family: courier new;" class="mycode_font">Timing "Version 1 (+)"...<br />
<span style="color: #FBFBFB;" class="mycode_color">__________</span>Mean = 78.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">__________</span>Mode = 76.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">________</span>Median = 78.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">_________</span>Range = 9.00ns<br />
Timing "Version 2 (+=)"...<br />
<span style="color: #FBFBFB;" class="mycode_color">__________</span>Mean = 94.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">__________</span>Mode = 94.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">________</span>Median = 94.00ns<br />
<span style="color: #FBFBFB;" class="mycode_color">_________</span>Range = 15.00ns<br />
</span><br />
<br />
If you don’t understand statistics, pick the one with the lowest <span style="font-style: italic;" class="mycode_i">Mean</span>, or better yet learn statistics.<br />
<br />
There is an optional second parameter to control the number of loops if the experiments run too quickly or slowly:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
RUN_TIMING(<span style="color: Red;" class="mycode_color">"Version <span style="color: Orange;" class="mycode_color">2</span> (+=)"</span>, <span style="color: Orange;" class="mycode_color">100</span>)<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-01: y_unique</span></span></span></span></span><br />
<br />
Most people know about <span style="font-style: italic;" class="mycode_i">y_hooks</span>, and that if you use it in multiple files you need to include it in every one.  But why?  The reason is that every time you include it, it generates a new unique name for the hooked functions so that two hook <span style="font-family: courier new;" class="mycode_font">OnPlayerConnect</span>s in a row don’t have the same name for the compiler.  But how?  <span style="font-style: italic;" class="mycode_i">y_unique</span><br />
<br />
Including <span style="font-style: italic;" class="mycode_i">y_hooks</span> after the first time just in turn includes <span style="font-style: italic;" class="mycode_i">y_unique</span>.  This library exports two symbols - <span style="font-family: courier new;" class="mycode_font">UNIQUE_SYMBOL</span> and <span style="font-family: courier new;" class="mycode_font">UNIQUE_FUNCTION</span>.<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">UNIQUE_SYMBOL</span> is just a number:<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
printf(<span style="color: Red;" class="mycode_color">"Value: %d"</span>, UNIQUE_SYMBOL);<br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
printf(<span style="color: Red;" class="mycode_color">"Value: %d"</span>, UNIQUE_SYMBOL);<br />
</span></blockquote>
<br />
That will print two numbers (probably sequential, but that’s not a guarantee).<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">UNIQUE_FUNCTION</span> is a macro that takes a symbol name and injects a number in to it:<br />
</li>
</ul>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
UNIQUE_FUNCTION&lt;My...thFunction&gt;()<br />
{<br />
}<br />
<br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
UNIQUE_FUNCTION&lt;My...thFunction&gt;()<br />
{<br />
}<br />
</span></blockquote>
<br />
That will make two functions with names such as <span style="font-family: courier new;" class="mycode_font">My008thFunction</span> and <span style="font-family: courier new;" class="mycode_font">My009thFunction</span>.  The zeros are by design, and the numbers are injected in to the symbol in place of the given <span style="font-family: courier new;" class="mycode_font">...</span>s.  The <span style="font-family: courier new;" class="mycode_font">&lt;Function...Name&gt;</span> pattern is used in a few other places in YSI as well, most notably <span style="font-style: italic;" class="mycode_i">y_groups</span>.  If you’re wondering why it is done this way, the following code won’t work:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
MyUNIQUE_SYMBOLthFunction()<br />
{<br />
}<br />
<br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
MyUNIQUE_SYMBOLthFunction()<br />
{<br />
}<br />
</span></blockquote>
<br />
That will just produce two functions both called exactly <span style="font-family: courier new;" class="mycode_font">MyUNIQUE_SYMBOLthFunction</span>, and the following code is a syntax error:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
My UNIQUE_SYMBOL thFunction()<br />
{<br />
}<br />
<br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Coding\y_unique&gt;</span><br />
My UNIQUE_SYMBOL thFunction()<br />
{<br />
}<br />
</span></blockquote>
<br />
In C this could be done with the <span style="font-family: courier new;" class="mycode_font">##</span> operator, but while there are proposals to add it to pawn, they haven’t materialised yet.<br />
<br />
How does <span style="font-style: italic;" class="mycode_i">y_unique</span> generate a new number every time you include it? It’s just a massive massive string of <span style="font-family: courier new;" class="mycode_font">#if UNIQUE_SYMBOL == 4</span>s etc. Its split up in to files by 100s, and within those in to groups of 10 for speed, but there’s really nothing more to it than that. This also means the numbers are limited to as high as the defines go (currently <span style="font-family: courier new;" class="mycode_font">999</span>).
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-02</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-02: Command Prefix</span></span></span></span></span><br />
<br />
Commands are normally <span style="font-family: courier new;" class="mycode_font">/command</span>; however, with y_commands you can change this symbol to anything you want per-command:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
YCMD:ban(playerid, params[], help)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Admin <span style="color: Red;" class="mycode_color">"!ban"</span> command.</span><br />
}<br />
<br />
YCMD:kick(playerid, params[], help)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Admin <span style="color: Red;" class="mycode_color">"!kick"</span> command.</span><br />
}<br />
<br />
YCMD:me(playerid, params[], help)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Player <span style="color: Red;" class="mycode_color">"#me"</span> command.</span><br />
}<br />
<br />
YCMD:help(playerid, params[], help)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Player <span style="color: Red;" class="mycode_color">"/help"</span> command.</span><br />
}<br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color">public</span> OnScriptInit()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Command_SetPrefix(YCMD:ban, '!');    <span style="color: Green;" class="mycode_color">// /ban  -&gt; !ban</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Command_SetPrefixNamed(<span style="color: Red;" class="mycode_color">"kick"</span>, '!'); <span style="color: Green;" class="mycode_color">// /kick -&gt; !kick</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Command_SetPrefix(YCMD:me, '#');     <span style="color: Green;" class="mycode_color">// /me  -&gt; #me</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// <span style="color: Red;" class="mycode_color">"/help"</span> doesn't need setting.</span><br />
}<br />
</span></blockquote>
<br />
There’s also <span style="font-family: courier new;" class="mycode_font">Command_GetPrefix</span>, <span style="font-family: courier new;" class="mycode_font">Command_GetPrefixNamed</span>, <span style="font-family: courier new;" class="mycode_font">Command_IsPrefixUsed</span>, and <span style="font-family: courier new;" class="mycode_font">Command_IsValidPrefix</span> to get meta-data on prefixes.<br />
<br />
There is no global prefix, but if you want to change it for every command you can use a simple loop:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">foreach</span> (<span style="color: Blue;" class="mycode_color">new</span> c : Command)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Command_SetPrefix(c, '!');<br />
}<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-03</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-03: Dependencies</span></span></span></span></span><br />
<br />
YSI usually needs <span style="font-style: italic;" class="mycode_i">md-sort</span> and <span style="font-style: italic;" class="mycode_i">amx-assembly</span>, but only if you use certain parts.  If you just include the very core of YSI you don’t even need <span style="font-style: italic;" class="mycode_i">a_samp</span>.  <span style="font-style: italic;" class="mycode_i">y_utils</span> and a few other libraries will work with just the core pawn includes - <span style="font-style: italic;" class="mycode_i">core</span>, <span style="font-style: italic;" class="mycode_i">file</span>, <span style="font-style: italic;" class="mycode_i">float</span>, <span style="font-style: italic;" class="mycode_i">string</span>, <span style="font-style: italic;" class="mycode_i">time</span>, and optionally <span style="font-style: italic;" class="mycode_i">console</span> if you have it.  So you can use YSI for projects in no way related to SA:MP.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-04</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-04: y_zonepulse</span></span></span></span></span><br />
<br />
This is a tiny little library that does just one thing - makes zones on the mini-map flash.  Make a zone, pass it to the <span style="font-family: courier new;" class="mycode_font">GangZonePulse</span> function, and watch it flash.<br />
<br />
Wait, can’t zones already flash with <span style="font-family: courier new;" class="mycode_font">GangZoneFlashForPlayer</span> and <span style="font-family: courier new;" class="mycode_font">GangZoneFlashForAll</span>?  Yes, but that just turns them on and off at a set rate.  This include allows you to specify the two colours they alternate between, how long to take fading between the colours, and how long to pause at each colour:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> zone = GangZoneCreate(<span style="color: Orange;" class="mycode_color">-10</span>.<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">-10</span>.<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">10</span>.<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">10</span>.<span style="color: Orange;" class="mycode_color">0</span>);<br />
<br />
<span style="color: Green;" class="mycode_color">// Boring.</span><br />
GangZoneFlashForPlayer(playerid, zone, COLOUR_RED);<br />
<br />
<span style="color: Green;" class="mycode_color">// Better:</span><br />
<span style="color: Green;" class="mycode_color">//  - Change from red to green over 2 seconds.</span><br />
<span style="color: Green;" class="mycode_color">//  - Pause at green for half a second.</span><br />
<span style="color: Green;" class="mycode_color">//  - Change back from green to red over 2 seconds.</span><br />
<span style="color: Green;" class="mycode_color">//  - Pause at red for half a second.</span><br />
<span style="color: Green;" class="mycode_color">//  - Repeat.</span><br />
GangZonePulseForPlayer(playerid, zone, COLOUR_RED, COLOUR_GREEN, <span style="color: Orange;" class="mycode_color">2000</span>, <span style="color: Orange;" class="mycode_color">500</span>);<br />
<br />
<span style="color: Green;" class="mycode_color">// Best:</span><br />
<span style="color: Green;" class="mycode_color">//  - Change from blue to yellow over 5 seconds.</span><br />
<span style="color: Green;" class="mycode_color">//  - Pause at yellow for 2 seconds.</span><br />
<span style="color: Green;" class="mycode_color">//  - Change back from yellow to blue almost instanly (1 ms).</span><br />
<span style="color: Green;" class="mycode_color">//  - Pause at blue for 1 second.</span><br />
<span style="color: Green;" class="mycode_color">//  - Repeat.</span><br />
GangZonePulseForPlayer(playerid, zone, COLOUR_RED, COLOUR_GREEN, <span style="color: Orange;" class="mycode_color">5000</span>, <span style="color: Orange;" class="mycode_color">2000</span>, <span style="color: Orange;" class="mycode_color">1</span>, <span style="color: Orange;" class="mycode_color">1000</span>);<br />
</span></blockquote>
<br />
The first parameter is also a <span style="font-family: courier new;" class="mycode_font">PlayerSet</span>, so can take players, groups, or arrays.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-05</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-05: y_testing Assertions</span></span></span></span></span><br />
<br />
When writing tests with <span style="font-style: italic;" class="mycode_i">y_testing</span>, most checks use <span style="font-family: courier new;" class="mycode_font">ASSERT</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
ASSERT(x == <span style="color: Orange;" class="mycode_color">2</span>);<br />
</span></blockquote>
<br />
It’s simple and clear.  However, if <span style="font-family: courier new;" class="mycode_font">x</span> isn’t <span style="font-family: courier new;" class="mycode_font">2</span> it doesn’t give you much information - all that’s known is that some boolean check was false.  For most common operations there are more specific tests that give you far more useful information.  In all these assertions, if they fail, the failed test and the value of <span style="font-family: courier new;" class="mycode_font">testee</span> are printed to help with debugging.<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">ASSERT_EQ(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value equals the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_NE(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value doesn’t equal the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_LE(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is less than or equal to the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_LT(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is less than the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_GE(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is greater than or equal to the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_GT(testee, comparison)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is greater than the given constant comparison.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_ZE(testee)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is zero.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_NZ(testee)</span> - Checks if the <span style="font-family: courier new;" class="mycode_font">testee</span> value is not zero.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_SAME(testee, string)</span> - Checks if <span style="font-family: courier new;" class="mycode_font">testee</span> is the given string.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_DIFF(testee, string)</span> - Checks if <span style="font-family: courier new;" class="mycode_font">testee</span> is not the given string.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">ASSERT_NEAR(testee, string)</span> - Checks if <span style="font-family: courier new;" class="mycode_font">testee</span> is the given string, ignoring case.<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-06</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-06: Plugins</span></span></span></span></span><br />
<br />
YSI is written to support many plugins in different ways, all without any direct dependencies.  If you call the native from a plugin in a function that is itself never called, you won't get errors for the natives not existing, so YSI can use plugin functions even when they aren't included or loaded.<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">MySQL</span></span></span></span></span><br />
<br />
Inline query functions built in directly:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">inline const</span> Result()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Closure variables work here, negating the need for extra parameters.</span><br />
}<br />
<span style="color: Green;" class="mycode_color">// This also calls `mysql_format`, so optional parameters are merged with `query`.</span><br />
MySQL_PQueryInline(gSQL, <span style="color: Blue;" class="mycode_color">using</span> <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Result, query);<br />
</span></blockquote>
<br />
There are also equivalent functions for `TQuery` and ORM functions.<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">BCrypt</span></span></span></span></span><br />
<br />
Inline comparisons functions:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">inline const</span> Same(bool:match)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Closure variables work here, negating the need for extra parameters.</span><br />
}<br />
BCrypt_CheckInline(text, hash, <span style="color: Blue;" class="mycode_color">using</span> <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Same);<br />
</span></blockquote>
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">inline const</span> Hashed(string:hass[])<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Closure variables work here, negating the need for extra parameters.</span><br />
}<br />
<span style="color: Green;" class="mycode_color">// `_` means `default` for the `cost` parameter.</span><br />
BCrypt_HashInline(text, _, <span style="color: Blue;" class="mycode_color">using</span> <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Hashed);<br />
</span></blockquote>
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">Requests</span></span></span></span></span><br />
<br />
<span style="font-family: courier new;" class="mycode_font">RequestCallback</span> and <span style="font-family: courier new;" class="mycode_font">RequestJSONCallback</span> as inline versions again.<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">Streamer</span></span></span></span></span><br />
<br />
Inline callback versions of almost all the streamer functions it makes sense for - <span style="font-family: courier new;" class="mycode_font">OnPlayerEnterDynamicArea</span>, <span style="font-family: courier new;" class="mycode_font">OnPlayerEnterDynamicRaceCP</span>, <span style="font-family: courier new;" class="mycode_font">OnPlayerEnterDynamicCP</span>, <span style="font-family: courier new;" class="mycode_font">OnPlayerPickUpDynamicPickup</span>, and <span style="font-family: courier new;" class="mycode_font">OnDynamicObjectMoved</span> are all wrapped, to enable calls such as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
cb_MoveDynamicObject(<span style="color: Blue;" class="mycode_color">using</span> <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> OnMoved, objectid, <span style="color: Orange;" class="mycode_color">10.0</span>, <span style="color: Orange;" class="mycode_color">10.0</span>, <span style="color: Orange;" class="mycode_color">10.0</span>, <span style="color: Orange;" class="mycode_color">10.0</span>);<br />
</span></blockquote>
<br />
However, this feature isn't quite complete yet as it relies on streamer plugin v2.9.5 and its "extra" extra IDs (to store callback IDs), which has only just been released.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-07</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-07: Bug Bounty</span></span></span></span></span><br />
<br />
YSI has a bug bounty.  It's not well defined or known, but it exists.  In general it is for fixing bugs, not just reporting them, though there are some exceptions if the report actually details the exact cause rather than just the effects.  The bigger the bug, the more you get paid.  It also only applies to 5.x, not 4.x, but includes fixing breaking changes between 4.x and 5.x.  Some examples of other things that are covered include:<br />
<ul class="mycode_list"><li>Significant test cases.<br />
</li>
<li>Documentation.<br />
</li>
<li>Compatibility with other (popular) includes.<br />
</li>
<li>const-correctness.<br />
</li>
<li>Bug fixes.<br />
</li>
<li>Compiler version compatibility.<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-08</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-08: Resize 2D Arrays</span></span></span></span></span><br />
<br />
You can resize the slots in a 2D array, as long as the sum remains the same.  For example this array:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> arr[<span style="color: Orange;" class="mycode_color">5</span>][<span style="color: Orange;" class="mycode_color">5</span>];<br />
</span></blockquote>
<br />
Has a grand total of 25 cells in which to store data.  Those can be reallocated to one slot of 21, and 4 slots of 1.  This is called a <span style="font-style: italic;" class="mycode_i">jagged array</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> arr[<span style="color: Orange;" class="mycode_color">5</span>][<span style="color: Orange;" class="mycode_color">5</span>];<br />
<span style="color: Green;" class="mycode_color">// Make <span style="color: Red;" class="mycode_color">"arr[0]" 21 cells big, and all the others just "1"</span>.</span><br />
Jagged_Resize(array, {<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">21</span>}, {<span style="color: Orange;" class="mycode_color">1</span>, <span style="color: Orange;" class="mycode_color">1</span>}, {<span style="color: Orange;" class="mycode_color">2</span>, <span style="color: Orange;" class="mycode_color">1</span>}, {<span style="color: Orange;" class="mycode_color">3</span>, <span style="color: Orange;" class="mycode_color">1</span>}, {<span style="color: Orange;" class="mycode_color">4</span>, <span style="color: Orange;" class="mycode_color">1</span>});<br />
</span></blockquote>
<br />
The compiler doesn’t know about these resizes, so you need to replace <span style="font-family: courier new;" class="mycode_font">sizeof(arr[])</span> with <span style="font-family: courier new;" class="mycode_font">jaggedsizeof(arr[0])</span>; specifying an index because they’re all different.<br />
<br />
You can also declare the array jagged initially:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> Jagged:arr[<span style="color: Orange;" class="mycode_color">5</span>]&lt;<span style="color: Orange;" class="mycode_color">21</span>, <span style="color: Orange;" class="mycode_color">1</span>, <span style="color: Orange;" class="mycode_color">1</span>, <span style="color: Orange;" class="mycode_color">1</span>, <span style="color: Orange;" class="mycode_color">1</span>&gt;;<br />
printf(<span style="color: Red;" class="mycode_color">"Slot <span style="color: Orange;" class="mycode_color">0</span> size: %d"</span>, jaggedsizeof (arr[<span style="color: Orange;" class="mycode_color">0</span>]));<br />
printf(<span style="color: Red;" class="mycode_color">"Slot <span style="color: Orange;" class="mycode_color">1</span> size: %d"</span>, jaggedsizeof (arr[<span style="color: Orange;" class="mycode_color">1</span>]));<br />
printf(<span style="color: Red;" class="mycode_color">"Slot <span style="color: Orange;" class="mycode_color">2</span> size: %d"</span>, jaggedsizeof (arr[<span style="color: Orange;" class="mycode_color">2</span>]));<br />
printf(<span style="color: Red;" class="mycode_color">"Slot <span style="color: Orange;" class="mycode_color">3</span> size: %d"</span>, jaggedsizeof (arr[<span style="color: Orange;" class="mycode_color">3</span>]));<br />
printf(<span style="color: Red;" class="mycode_color">"Slot <span style="color: Orange;" class="mycode_color">4</span> size: %d"</span>, jaggedsizeof (arr[<span style="color: Orange;" class="mycode_color">4</span>]));<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-09</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-09: Startup Time And Size Solved</span></span></span></span></span><br />
<br />
The longest standing complaints about YSI were the slow startup time and the huge resulting AMX size.  Today I solved both of them at once by rewriting y_malloc.  It now uses the heap again, but in a safe manner, thus vastly reducing file sizes and load times.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-11</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-10: y_php</span></span></span></span></span><br />
<br />
YSI has full 2-way communication with a PHP CLI, or any other server running in a persistent mode.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-11</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-11: Origins of YSI</span></span></span></span></span><br />
<br />
I started writing a race server (San Andreas Underground), it was going quite well with some unique features for the time, one of which was the ability to host multiple races in parallel.  Unfortunately I got distracted writing the underlying core instead of the high-level gamemode, and eventually ended up releasing this core as a library - YSI.  Thus <span style="font-style: italic;" class="mycode_i">y_races</span> is the oldest component in YSI, and the main algorithm hasn’t changed at all since, because it was so solid to begin with.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-12</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-12: Adding <span style="font-style: italic;" class="mycode_i">y_groups</span> Support</span></span></span></span></span><br />
<br />
Obviously various YSI libraries have <span style="font-style: italic;" class="mycode_i">y_groups</span> support, via functions such as:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Group_SetCommand(Group:g, coommand, allowed);<br />
bool:Group_AreaAllowed(Group:g, area);<br />
Group_SetClassDefault(Group:g, allowed);<br />
</span></blockquote>
<br />
But none of these functions actually exist anywhere in code - they’re all generated from a common template at compile-time.  And your own libraries can use the same pattern.  Assuming you are writing an <span style="font-family: courier new;" class="mycode_font">Object</span> library:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Green;" class="mycode_color">// Just the name, used to generate all the group function names.</span><br />
<span style="color: Brown;" class="mycode_color">#define GROUP_LIBRARY_NAME&lt;%0...%1&gt; %0Object%1</span><br />
<br />
<span style="color: Green;" class="mycode_color">// The maximum number of entities your library can hold.</span><br />
<span style="color: Brown;" class="mycode_color">#define GROUP_LIBRARY_SIZE 512</span><br />
<br />
<span style="color: Green;" class="mycode_color">// The tag for your entity IDs.  Can be ommitted for `_:`.</span><br />
<span style="color: Brown;" class="mycode_color">#define GROUP_LIBRARY_TAG Obj</span><br />
<br />
<span style="color: Green;" class="mycode_color">// And include y_groups after all the defines above (it will undefine them).</span><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Players\y_groups&gt;</span><br />
</span></blockquote>
<br />
Then you just need a way for <span style="font-style: italic;" class="mycode_i">y_groups</span> to enable and disable individual players.  This is done through a single function, all <span style="font-style: italic;" class="mycode_i">y_groups</span> does is manage when to add and remove players by calling this one function:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Object_SetPlayer(Obj:entity, playerid, bool:set)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Do whatever you want here to enable this entity for this player.</span><br />
}<br />
</span></blockquote>
<br />
AFter that very little code you have:<br />
<ul class="mycode_list"><li><span style="font-family: Courier New;" class="mycode_font">Group_SetObject(Group:g, Obj:e, set);</span><br />
</li>
<li><span style="font-family: Courier New;" class="mycode_font">Group_SetObjectDefault(Group:g, Obj:e, set);</span><br />
</li>
<li><span style="font-family: Courier New;" class="mycode_font">Group_SetGlobalObject(Group:g, Obj:e, set);</span><br />
</li>
</ul>
<br />
And far more.  All the <span style="font-style: italic;" class="mycode_i">y_groups</span> functions, with <span style="font-family: courier new;" class="mycode_font">...</span> replaced by your library name.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-13</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-13: <span style="font-style: italic;" class="mycode_i">y_dialog</span> Inline Parameters</span></span></span></span></span><br />
<br />
Most documentation on <span style="font-style: italic;" class="mycode_i">y_dialog</span> callbacks show the following:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">inline</span> <span style="color: DeepSkyBlue;" class="mycode_color">const</span> Response(pid, dialogid, response, listitem, string:inputtext[])<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Code goes here.</span><br />
}<br />
Dialog_ShowCallback(playerid, using <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Response, DIALOG_STYLE_INPUT, <span style="color: Red;" class="mycode_color">"Title", "Contents", "OK"</span>);<br />
</span></blockquote>
<br />
However, when the closure also contains <span style="font-family: courier new;" class="mycode_font">playerid</span>, this gets cumbersome to constantly rename the <span style="font-family: courier new;" class="mycode_font">playerid</span> variable passed to the inline, then not use it.  Similarly the <span style="font-family: courier new;" class="mycode_font">dialogid</span> variable is redundant because <span style="font-style: italic;" class="mycode_i">y_dialog</span> doesn’t use IDs and never provides them for comparison.  Thus, these two parameters are both optional and can be skipped in the inline:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">inline</span> <span style="color: DeepSkyBlue;" class="mycode_color">const</span> Response(response, listitem, string:inputtext[])<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Code goes here.</span><br />
}<br />
Dialog_ShowCallback(playerid, using <span style="color: DeepSkyBlue;" class="mycode_color">inline</span> Response, DIALOG_STYLE_INPUT, <span style="color: Red;" class="mycode_color">"Title", "Contents", "OK"</span>);<br />
</span></blockquote>
<br />
<span style="font-family: courier new;" class="mycode_font">Dialog_ShowCallback</span> takes either <span style="font-family: courier new;" class="mycode_font">iis</span> or <span style="font-family: courier new;" class="mycode_font">iiiis</span> functions.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-14</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-14: <span style="font-style: italic;" class="mycode_i">y_stringhash</span> Hash Algorithm</span></span></span></span></span><br />
<br />
You can change which hash function is used by <span style="font-style: italic;" class="mycode_i">y_stringhash</span>:<br />
<ul class="mycode_list"><li>Bernstein (Default):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">switch</span> (YHash(input))<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> __H&lt;hello&gt;: {}<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> __H&lt;world&gt;: {}<br />
}<br />
</span></blockquote>
<br />
</li>
<li>Bernstein (Explicit):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">switch</span> (YHash(input, .type = hash_bernstein))<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="ecb3b3a4ac8e">[email&#160;protected]</a>&lt;hello&gt;: {}<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="4619190e0624">[email&#160;protected]</a>&lt;world&gt;: {}<br />
}<br />
</span></blockquote>
<br />
</li>
<li>FNV1:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">switch</span> (YHash(input, .type = hash_fnv<span style="color: Orange;" class="mycode_color">1</span>))<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="6d3232252d0b">[email&#160;protected]</a>&lt;hello&gt;: {}<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="722d2d3a3214">[email&#160;protected]</a>&lt;world&gt;: {}<br />
}<br />
</span></blockquote>
<br />
</li>
<li>FNV1a:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">switch</span> (YHash(input, .type = hash_fnv<span style="color: Orange;" class="mycode_color">1</span>a))<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="eab5b5a2aa8b">[email&#160;protected]</a>&lt;hello&gt;: {}<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">case</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="316e6e797150">[email&#160;protected]</a>&lt;world&gt;: {}<br />
}<br />
</span></blockquote>
</li>
</ul>
<br />
You would only need this in the extremely rare event that you get a hash collision between two <span style="font-family: courier new;" class="mycode_font">case</span>s.  It is also important to note that these are NOT cryptographic hashes - they are use to compare simple string, NOT to store passwords.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-16</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-15: <span style="font-style: italic;" class="mycode_i">y_remote</span></span></span></span></span></span><br />
<br />
This very simple library just wraps CallRemoteFunction, to generate all the specifiers for you and check that the parameters are correct at compile-time.  This code compiles but doesn't work:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Green;" class="mycode_color">// FS</span><br />
<span style="color: DeepSkyBlue;" class="mycode_color">forward</span> FunctionInFilterscript(a, b[]);<br />
<br />
<span style="color: DeepSkyBlue;" class="mycode_color">public</span> FunctionInFilterscript(a, b[])<br />
{<br />
}<br />
<br />
<span style="color: Green;" class="mycode_color">// GM</span><br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Incorrect parameters, but no warning.</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>CallRemoteFunction(<span style="color: Red;" class="mycode_color">"FunctionInFilterscript"</span>, <span style="color: Red;" class="mycode_color">"ii"</span>, <span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">42</span>);<br />
<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Name spelt incorrectly, but no warning.</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>CallRemoteFunction(<span style="color: Red;" class="mycode_color">"FunctionInFilterScript"</span>, <span style="color: Red;" class="mycode_color">"is"</span>, <span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Red;" class="mycode_color">"hello"</span>);<br />
}<br />
</span></blockquote>
<br />
This code gives an error:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Green;" class="mycode_color">// FS</span><br />
<span style="color: DeepSkyBlue;" class="mycode_color">remote</span> FunctionInFilterscript(a, string:b[])<br />
{<br />
}<br />
<br />
<span style="color: Green;" class="mycode_color">// GM</span><br />
<span style="color: DeepSkyBlue;" class="mycode_color">remote</span> FunctionInFilterscript(a, string:b[]);<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Type mismatch error.</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">call</span> FunctionInFilterscript(<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Orange;" class="mycode_color">42</span>);<br />
<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Undefined symbol error.</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">call</span> FunctionInFilterScript(<span style="color: Orange;" class="mycode_color">0</span>, <span style="color: Red;" class="mycode_color">"hello"</span>);<br />
}<br />
</span></blockquote>
<br />
That's very useful for spotting bugs early.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-16</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-16: CUSTOM_TAG_TYPES</span></span></span></span></span><br />
<br />
An earlier tip mentioned <span style="font-family: courier new;" class="mycode_font">GLOBAL_TAG_TYPES</span>, a list of tags that all YSI functions will accept.  You can extend this list with your own tags by defining <span style="font-family: courier new;" class="mycode_font">CUSTOM_TAG_TYPES</span>.  This is a bare list (no braces) of tags, and from now on all YSI functions (formatters etc) will accept these tags with no warnings:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define CUSTOM_TAG_TYPES PlayerText3D, Object</span><br />
<span style="color: Brown;" class="mycode_color">#include &lt;YSI_Group\y_library&gt;</span><br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-19</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-17: Passing Normal Functions As Callbacks</span></span></span></span></span><br />
<br />
Functions that most people think take <span style="font-family: courier new;" class="mycode_font">inline</span> functions can also take <span style="font-family: courier new;" class="mycode_font">public</span> functions with <span style="font-family: courier new;" class="mycode_font">using callback</span> (or <span style="font-family: courier new;" class="mycode_font">using public</span>):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">public</span> Response(playerid, dialogid, response, listitem, string:inputtext[])<br />
{<br />
}<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Dialog_ShowCallback(playerid, <span style="color: Blue;" class="mycode_color">using callback</span> Response&lt;iiiis&gt;, DIALOG_STYLE_INPUT, <span style="color: Red;" class="mycode_color">"Title", "Contents", "OK"</span>);<br />
}<br />
</span></blockquote>
<br />
This does need an explicit type (<span style="font-family: courier new;" class="mycode_font">iiiis</span>) because the types of <span style="font-family: courier new;" class="mycode_font">public</span>s can’t be automatically determined in the same way as for <span style="font-family: courier new;" class="mycode_font">inline</span>s.  With an <span style="font-family: courier new;" class="mycode_font">inline</span> the type is checked and if the parameters don’t match a warning is given.  However, with a <span style="font-family: courier new;" class="mycode_font">public</span>, you specify the type manually, so if it is wrong there should be no warning (you basically promise the compiler it is called his way).  Fortunately, this code uses <span style="font-family: courier new;" class="mycode_font">addressof</span> underneath, which generates code to check the call is correct - so if the specified type is wrong here the compiler actually gives an error, thus re-introducing lovely type-checking.<br />
<br />
Because the call uses <span style="font-family: courier new;" class="mycode_font">addressof</span>, you can extend this to another type of function - bare functions. These are sometimes called <span style="font-family: courier new;" class="mycode_font">stock</span>s, but they are not <span style="font-family: courier new;" class="mycode_font">stock</span>s - that keyword is only used in some situations (mainly libraries):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Response(playerid, dialogid, response, listitem, string:inputtext[])<br />
{<br />
}<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Dialog_ShowCallback(playerid, <span style="color: Blue;" class="mycode_color">using function</span> Response&lt;iiiis&gt;, DIALOG_STYLE_INPUT, <span style="color: Red;" class="mycode_color">"Title", "Contents", "OK"</span>);<br />
}<br />
</span></blockquote>
<br />
This has three advantages:<br />
<ul class="mycode_list"><li>Reduced scope.  You can declare the functions as <span style="font-family: courier new;" class="mycode_font">static</span> if you need.<br />
</li>
<li>Reduced headers.  The <span style="font-family: courier new;" class="mycode_font">Response</span> function is no longer placed in the <span style="font-family: courier new;" class="mycode_font">public</span>s section of the AMX header.<br />
</li>
<li>No <span style="font-family: courier new;" class="mycode_font">forward</span>.  Some people really really hate writing this keyword, now you don’t need to.<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-19</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-18: <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="edaeaca1a1ad">[email&#160;protected]</a></span></span></span></span></span></span><br />
<br />
Technically this is a fact about <span style="font-style: italic;" class="mycode_i">amx-assembly</span>, but it directly affects using YSI.<br />
<br />
You saw in the previous tip how using <span style="font-family: courier new;" class="mycode_font">using callback</span> and <span style="font-family: courier new;" class="mycode_font">using function</span> take the parameter specifier after the function name (<span style="font-family: courier new;" class="mycode_font">using function Response&lt;iiiis&gt;</span>).  This is so that the underlying call to <span style="font-family: courier new;" class="mycode_font">addressof</span> can generate the correct code to actually GET the address.  Roughly speaking, a call to the function is generated, but the call is conditional on the result of a call to an internal <span style="font-family: courier new;" class="mycode_font">addressof</span> function, which always returns <span style="font-family: courier new;" class="mycode_font">false</span>.  This is so the internal function can read the next <span style="font-family: courier new;" class="mycode_font">CALL</span> OpCode, but never execute it.  Something like the following:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> a = <span style="color: Blue;" class="mycode_color">addressof </span>(MyFunction&lt;iiss&gt;);<br />
</span></blockquote>
<br />
Becomes:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> a = (GetNextCall() ? MyFunction(INT, INT, STRING, STRING) : gGetNextCallResult);<br />
</span></blockquote>
<br />
However, you can customise how <span style="font-family: courier new;" class="mycode_font">addressof</span> internally calls your function using <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="1f5c5e53535f517e727a">[email&#160;protected]</a></span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
MyFunction(a, b, <span style="color: DeepSkyBlue;" class="mycode_color">const</span> string:c[] = <span style="color: Red;" class="mycode_color">""</span>, <span style="color: DeepSkyBlue;" class="mycode_color">const</span> string:d[] = <span style="color: Red;" class="mycode_color">"hello"</span>)<br />
{<br />
}<br />
<span style="color: Brown;" class="mycode_color">#define <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="3f7c7e73737f7246794a515c4b565051">[email&#160;protected]</a> MyFunction(4, 5)</span><br />
</span></blockquote>
<br />
Now, <span style="font-family: courier new;" class="mycode_font">addressof</span> doesn’t need the explicit specifier, and by extension neither does <span style="font-family: courier new;" class="mycode_font">using</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Response(playerid, dialogid, response, listitem, string:inputtext[])<br />
{<br />
}<br />
<br />
<span style="color: Brown;" class="mycode_color">#define <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="7a393b36363a281f090a1514091f">[email&#160;protected]</a> Response(0, 0, 0, 0, <span style="color: Red;" class="mycode_color">""</span>)</span><br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Dialog_ShowCallback(playerid, using function Response, DIALOG_STYLE_INPUT, <span style="color: Red;" class="mycode_color">"Title", "Contents", "OK"</span>);<br />
}<br />
</span></blockquote>
<br />
However, <span style="font-family: courier new;" class="mycode_font">&lt;iiiis&gt;</span> has the advantage that it is always const-correct, unlike that example…
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-19</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-19: Initialisation Order</span></span></span></span></span><br />
<br />
I’m somewhat loathe to document this, as I know someone will abuse it, but this is the complete order of initialisation callbacks in YSI.  Unfortunately, over the years this has got slowly more complicated with more and more dependencies and restrictions.<br />
<br />
Originally it was just either <span style="font-family: courier new;" class="mycode_font">OnGameModeInit</span> or <span style="font-family: courier new;" class="mycode_font">OnFilterScriptInit</span>, but no-one uses the <span style="font-family: courier new;" class="mycode_font">FILTERSCRIPT</span> macro correctly, so <span style="font-family: courier new;" class="mycode_font">OnScriptInit</span> was added, which can detect if the script is a GM or FS; and is called before either of their callbacks.<br />
<br />
Then JIT support was added to the code, which requires generating assembly from <span style="font-family: courier new;" class="mycode_font">OnJITInit</span>, but that won’t be called if they aren’t using the JIT plugin.  Thus <span style="font-family: courier new;" class="mycode_font">OnCodeInit</span> was added, which is called from either <span style="font-family: courier new;" class="mycode_font">OnJITInit</span>, <span style="font-family: courier new;" class="mycode_font">OnFilterScriptInit</span>, or <span style="font-family: courier new;" class="mycode_font">OnGameModeInit</span>; whichever comes first. <span style="font-family: courier new;" class="mycode_font">OnCodeInit</span> is harder to use than any other callback because it actually generates the code used by <span style="font-style: italic;" class="mycode_i">y_hooks</span> and other libraries, thus no advanced YSI features like <span style="font-family: courier new;" class="mycode_font">hook</span> or <span style="font-family: courier new;" class="mycode_font">inline</span> can be used within it.<br />
<br />
Then I added caching.  This saves a copy of the mode after all <span style="font-family: courier new;" class="mycode_font">OnCodeInit</span> generation has run, and is called when the mode is loaded from cache, rather than loaded initially.  However, this entire feature was a dead-end and recently removed, thus this callback was also removed.  I don’t normally like removing features as it breaks backwards-compatibility, but this was an exception - it was an awful feature you should avoid.<br />
<br />
In addition, there are the lightweight initialisation functions, which can be used in place of <span style="font-family: courier new;" class="mycode_font">OnScriptInit</span>.  <span style="font-family: courier new;" class="mycode_font">PRE_INIT__</span> and <span style="font-family: courier new;" class="mycode_font">POST_INIT__</span>.  Instead of using <span style="font-family: courier new;" class="mycode_font">hook</span> with a normal init name, these have unique names with a custom declaration (meaning you can make initialisation hooks without needing to include <span style="font-style: italic;" class="mycode_i">y_hooks</span>):<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
POST_INIT__ CreateGroups()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Green;" class="mycode_color">// Code goes here.</span><br />
}<br />
</span></blockquote>
<br />
The most common example of <span style="font-family: courier new;" class="mycode_font">POST_INIT__</span> is <span style="font-family: courier new;" class="mycode_font">final</span>*:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: DeepSkyBlue;" class="mycode_color">final</span> Group:gAdmin = Group_Create(<span style="color: Red;" class="mycode_color">"Admin <span style="color: Orange;" class="mycode_color">1</span>"</span>);<br />
</span></blockquote>
<br />
So the full intialisation order is:<br />
<ul class="mycode_list"><li><span style="font-family: courier new;" class="mycode_font">OnCodeInit</span> - no (very few) YSI features can be used.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">OnJITInit</span> - with JIT plugin.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">PRE_INIT__</span> functions - old <span style="font-family: courier new;" class="mycode_font">final</span> location.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">OnScriptInit</span> - all scripts.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">POST_INIT__</span> functions - new <span style="font-family: courier new;" class="mycode_font">final</span> location.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">OnFilterScriptInit</span> - filterscripts only.<br />
</li>
<li><span style="font-family: courier new;" class="mycode_font">OnGameModeInit</span> - all scripts, no others are called in filterscripts.<br />
</li>
</ul>
<br />
* Its actually currently <span style="font-family: courier new;" class="mycode_font">PRE_INIT__</span>, but I’m changing that due to some conflicts, and it making the initialisation actually even more complicated than is listed here.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-05-20</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-20: Yet Another Call Improvement</span></span></span></span></span><br />
<br />
Three days ago introduced <span style="font-family: courier new;" class="mycode_font">using function Name&lt;spec&gt;</span>, and two days ago introduced <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="f9bab8b5b5b9b798949c">[email&#160;protected]</a></span>. These are both methods use to specify what parameters a function expects, but they are used to pass the function as a pointer to another function that already knows what parameters the pointee should take.<br />
<br />
Given:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Caller(arg<span style="color: Orange;" class="mycode_color">1</span>, Func:cb&lt;iii&gt;, arg<span style="color: Orange;" class="mycode_color">2</span>)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>@.cb(arg<span style="color: Orange;" class="mycode_color">1</span>, arg<span style="color: Orange;" class="mycode_color">2</span>, arg<span style="color: Orange;" class="mycode_color">1</span> + arg<span style="color: Orange;" class="mycode_color">2</span>);<br />
}<br />
<br />
Callee(a, b, c)<br />
{<br />
}<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Caller(<span style="color: Orange;" class="mycode_color">4</span>, <span style="color: Blue;" class="mycode_color">addressof</span> (Callee&lt;iii&gt;), <span style="color: Orange;" class="mycode_color">5</span>);<br />
}<br />
</span></blockquote>
<br />
The specifier is in this code twice - once in the parameters of <span style="font-family: courier new;" class="mycode_font">Caller</span> to say it wants a function that takes three parameters, and once in the <span style="font-family: courier new;" class="mycode_font">addressof</span> to say that <span style="font-family: courier new;" class="mycode_font">Callee</span> is indeed a function that meets the requirements of taking three parameters.  The same basic problem exists if you’re using <span style="font-family: courier new;" class="mycode_font">using</span> or <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="6122202d2d21">[email&#160;protected]</a></span> as well - repetition of information.<br />
<br />
Because of how this all works, you actually can’t stop this information being duplicated, but you can hide it such that users of your function never need to worry about it.  This is normally done with <span style="font-family: courier new;" class="mycode_font">&amp;</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
Caller(arg<span style="color: Orange;" class="mycode_color">1</span>, Func:cb&lt;iii&gt;, arg<span style="color: Orange;" class="mycode_color">2</span>)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>@.cb(arg<span style="color: Orange;" class="mycode_color">1</span>, arg<span style="color: Orange;" class="mycode_color">2</span>, arg<span style="color: Orange;" class="mycode_color">1</span> + arg<span style="color: Orange;" class="mycode_color">2</span>);<br />
}<br />
<br />
Callee(a, b, c)<br />
{<br />
}<br />
<br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>Caller(<span style="color: Orange;" class="mycode_color">4</span>, &amp;Callee, <span style="color: Orange;" class="mycode_color">5</span>);<br />
}<br />
</span></blockquote>
<br />
Much cleaner than all other solutions, but how does it work?  That’s not a standard operator.  The answer is that oft-maligned feature - macros:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define Caller(%0,&amp;%1,%2) Caller(%0,addressof(%1&lt;iii&gt;),%2)</span><br />
</span></blockquote>
<br />
Using this macro (placed almost anywhere) will detect when the second parameter (Nth parameter in other calls - just depends when you want the pointer) starts with <span style="font-family: courier new;" class="mycode_font">&amp;</span>.  If it does it replaces that parameter with a typed call to <span style="font-family: courier new;" class="mycode_font">addressof</span>, as was done in earlier examples.  The fact that th function and macro have exactly the same name is important - this allows all the methods to work, not just one.<br />
<br />
For <span style="font-family: courier new;" class="mycode_font">Dialog_ShowCallback</span> this would be:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define Dialog_ShowCallback(%0,&amp;%1,%2) Dialog_ShowCallback(%0,addressof(%1&lt;iiiis&gt;),%2)</span><br />
</span></blockquote>
<br />
For <span style="font-family: courier new;" class="mycode_font">BCrypt_CheckInline</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define BCrypt_HashInline(%0,%1,&amp;%2) BCrypt_HashInline(%0,%1,addressof(%2&lt;s&gt;))</span><br />
</span></blockquote>
<br />
For <span style="font-family: courier new;" class="mycode_font">cb_MoveDynamicObject</span>:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define cb_MoveDynamicObject(&amp;%0,%1) cb_MoveDynamicObject(addressof(%0&lt;i&gt;),%1)</span><br />
</span></blockquote>
<br />
The last macro parameter will detect ALL remaining function parameters after the <span style="font-family: courier new;" class="mycode_font">&amp;</span> - you only need to explicitly specify the parameters before <span style="font-family: courier new;" class="mycode_font">&amp;</span>.  Thus this technique works for vararg functions as well.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-06-01</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-21: Pass An Iterator As A Parameter</span></span></span></span></span><br />
<br />
Sometimes you want to pass an iterator to a function.  Iterators are often global, but they don't have to be, and there are still times when you might want them as generic parameters.  There's no simple way to do this, it wasn't really a design consideration, but it is possible.<br />
<br />
Under the hood an iterator is two variables - an array containing the data, and a single variable containing the count (the count is also an array for multi-iterators).  For the iterator <span style="font-family: courier new;" class="mycode_font">Player</span> these are called <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="c68fb2a3b4a7b2a9b48696aaa7bfa3b4">[email&#160;protected]</a></span> and <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="7d3409180f223e120813093d2d111c04180f">[email&#160;protected]</a></span> (so you get vaguely readable warnings).  Thus, to receive an iterator in a function as use it within that function you need the following two parameters:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
MyFunction(<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="91d8e5f4e3f0e5fee3d1f8e5f4e3">[email&#160;protected]</a>[MAX_PLAYERS + 1], <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="0a437e6f785549657f647e4a637e6f78">[email&#160;protected]</a>)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">foreach</span> (<span style="color: Blue;" class="mycode_color">new</span> i : iter)<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>}<br />
}<br />
</span></blockquote>
<br />
You can't use the `Iterator:` macro for this, because it also generates initialisation code, but you could create your own.  The size is <span style="font-family: courier new;" class="mycode_font">%1 + 1</span> to hold some internal data.  This does mean you have to know what size of iterator you want to pass in advance, because currently <span style="font-family: courier new;" class="mycode_font">foreach</span> uses <span style="font-family: courier new;" class="mycode_font">sizeof</span> a lot internally.  This might be fixable, but isn't currently:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define IterParam:%0&lt;%1&gt; <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="7d3409180f1c09120f3d">[email&#160;protected]</a>%0[%1 + 1], <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="abe2dfced9f4e8c4dec5dfeb">[email&#160;protected]</a>%0</span><br />
<br />
MyFunction(IterParam:iter&lt;MAX_PLAYERS&gt;)<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">foreach</span> (<span style="color: Blue;" class="mycode_color">new</span> i : iter)<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>}<br />
}<br />
</span></blockquote>
<br />
With this code, PASSING the iterator is again fairly straightforward:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>MyFunction(<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="4e073a2b3c2f3a213c0e1e222f372b3c">[email&#160;protected]</a>, <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="8ac3feeff8d5c9e5ffe4fecadae6ebf3eff8">[email&#160;protected]</a>);<br />
}<br />
</span></blockquote>
<br />
But we've just changed one nice parameter in to two horrible parameters.  Fortunately the calling side of things is far better defined (since the <span style="font-style: italic;" class="mycode_i">y_iterate</span>) API functions like <span style="font-family: courier new;" class="mycode_font">Iter_Add</span> already take plain iterators as parameters.  The functions might not be defined nicely, but they can be called nicely.  The macro for this is <span style="font-family: courier new;" class="mycode_font">_ITER</span>, which does all the work detecting which type of iterator was passed (normal or multi), the size and start, and calls an <span style="font-style: italic;" class="mycode_i">InternalA</span> or <span style="font-style: italic;" class="mycode_i">InternalB</span> version of another macro depending on normal- or multi-:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define MyFunction _ITER&lt;MyFunction&gt;<br />
#define Iter_MyFunction_InternalA(%0,%1)    MyFunction_(_:%1,%0)<br />
#define Iter_MyFunction_InternalB(%0,%2,%1) MyFunction_(_:%1,%0)</span><br />
</span></blockquote>
<br />
This renames <span style="font-family: courier new;" class="mycode_font">MyFunction</span> to <span style="font-family: courier new;" class="mycode_font">MyFunction_</span>, then defines <span style="font-family: courier new;" class="mycode_font">MyFunction</span> as a macro that takes an iterator.  <span style="font-family: courier new;" class="mycode_font">InternalA</span> has two parameters given - the count and array.  <span style="font-family: courier new;" class="mycode_font">InternalB</span> has three parameters given - the count, the start, and the array.  If you want to pass the size of the iterator it's <span style="font-family: courier new;" class="mycode_font"><a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="dd9b9dae">[email&#160;protected]</a>(%1)<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="aa87ecead9">[email&#160;protected]</a>(%0)</span>.  You can also just call your function  <span style="font-family: courier new;" class="mycode_font">Iter_MyFunction_InternalA</span> and you don't need the extra macros.  If your function takes more parameters after the iterator, they are all passed to the macros/functions in an additional <span style="font-family: courier new;" class="mycode_font">%9</span> at the end of the parameter list.<br />
<br />
Now the call is very simply:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
main()<br />
{<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>MyFunction(Player);<br />
}<br />
</span></blockquote>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: YSI Daily Tips</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2021-06-25</strong>
<br />
<br />
<span style="color: Red;" class="mycode_color"><span style="font-size: x-large;" class="mycode_size"><span style="font-weight: bold;" class="mycode_b"><span style="text-decoration: underline;" class="mycode_u"><span style="color: Green;" class="mycode_color">2021-05-21: bUt YsI hAs MaCrOs!</span></span></span></span></span><br />
<br />
I’m a big advocate of NOT using macros for things, yet am famous for using macros - how can those two things be reconciled?  Easy, it depends on WHY you are using them, and I have some guidelines on when to use them and when not to use them.  Basically it depends on two things - how much work you’re saving yourself and how much you’re changing normal syntax (making it harder for other people to read your code).  As an aside, macros are very hard to get right, and while they may appear to work correctly in some cases, that doesn’t mean they always will, so there’s a good chance that without a thorough understanding of what’s going on you’re just opening yourself up to major future issues.<br />
<br />
Some examples of pointless macros:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define SCM SendClientMessage</span><br />
SCM(playerid, COLOUR_ERROR, <span style="color: Red;" class="mycode_color">"Why are you using SCM?"</span>);<br />
</span></blockquote>
<br />
The ultimate stupid macro.  How much work does it save?  None - you’re replacing a single function call with a single function call (and if you don’t have auto-completion in your editor get a better editor).<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define Object:: Object_</span><br />
Object::SetPosition(objectid, x, y, z);<br />
</span></blockquote>
<br />
Worse than not saving you any effort, this requires MORE effort, because not only is it actually more characters to write, but it breaks auto-completion so that time save is gone as well.  Plus it adds non-standard syntax to code that will cause people to stop and question what exactly is going on.  Is it REALLY just <span style="font-family: courier new;" class="mycode_font">Object_</span> or is it doing something more behind the scenes?<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define SendClientMessageEx(%0,%1,%2) \</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>format(string, sizeof (string), %<span style="color: Orange;" class="mycode_color">2</span>); \<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>SendClientMessage(%<span style="color: Orange;" class="mycode_color">0</span>, %<span style="color: Orange;" class="mycode_color">1</span>, string)<br />
</span></blockquote>
<br />
This example is broken, and the name is terrible - <span style="font-family: courier new;" class="mycode_font">Ex</span> tells you nothing about what the function actually does, it is only obvious because you’re looking at the code right now!  Plus, I hope you aren’t doing this:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (!HasAdminLevel(playerid, <span style="color: Orange;" class="mycode_color">5</span>))<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">return</span> SendClientMessageEx(playerid, COLOUR_ERROR, <span style="color: Red;" class="mycode_color">"You need admin level %d"</span>, <span style="color: Orange;" class="mycode_color">5</span>);<br />
</span></blockquote>
<br />
That code won’t work, but good luck figuring out why looking at the call site.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Brown;" class="mycode_color">#define SendToAdmin(%0,%1,%2) \</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: Blue;" class="mycode_color">if</span> (IsPlayerAdmin(%<span style="color: Orange;" class="mycode_color">0</span>)) \<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span><span style="color: #FBFBFB;" class="mycode_color">____</span>SendClientMessage(%<span style="color: Orange;" class="mycode_color">0</span>, %<span style="color: Orange;" class="mycode_color">1</span>, %<span style="color: Orange;" class="mycode_color">2</span>)<br />
</span></blockquote>
<br />
This is also broken in several ways:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
SendToAdmin(playerid++, COLOUR_ERROR, <span style="color: Red;" class="mycode_color">"I hope they're not an admin"</span>);<br />
</span></blockquote>
<br />
This code will randomly miss people.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">if</span> (ThingShouldHappen())<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>SendToAdmin(player, COLOUR_OK, <span style="color: Red;" class="mycode_color">"Yes"</span>);<br />
<span style="color: Blue;" class="mycode_color">else</span><br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>SendToAdmin(player, COLOUR_OK, <span style="color: Red;" class="mycode_color">"No"</span>);<br />
</span></blockquote>
<br />
This will never ever send <span style="font-family: courier new;" class="mycode_font">"No"</span> to anyone, not even admins.<br />
<br />
So why is YSI “allowed” macros?  The truth is some of them are pretty bad and shouldn’t exist, but for the most part they’re used when the code generated is complex and something that people shouldn’t need to worry about, AND that code can’t be moved to a function.  Most of the examples above are either macros for the sake of using macros, or would be more effective (and less buggy) as functions.  Take <span style="font-style: italic;" class="mycode_i">y_iterate</span> for example:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> Iterator:Admins&lt;MAX_PLAYERS&gt;;<br />
</span></blockquote>
<br />
The code generated by this, which you COULD type out yourself, is:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite><span style="font-family: Courier New;" class="mycode_font"><br />
<span style="color: Blue;" class="mycode_color">new</span> <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="50192435220f03392a351011343d393e23">[email&#160;protected]</a>, <a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="91d8e5f4e3f0e5fee3d1d0f5fcf8ffe2">[email&#160;protected]</a>[MAX_PLAYERS + <span style="color: Orange;" class="mycode_color">1</span>] = {<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>MAX_PLAYERS * (<span style="color: Orange;" class="mycode_color">1</span> - MAX_PLAYERS),<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>MAX_PLAYERS * (<span style="color: Orange;" class="mycode_color">2</span> - MAX_PLAYERS),<br />
<span style="color: #FBFBFB;" class="mycode_color">____</span>...<br />
};<br />
</span></blockquote>
<br />
WHY it is that is not something people need to know - it’s an implementation detail of how the library works.  Calling <span style="font-family: courier new;" class="mycode_font">format</span> to format a string is not an implementation detail, that’s something everyone knows, everyone knows that’s what your macro is doing, you aren’t saving confusion by hiding it.<br />
<br />
The other rule I try to stick to is to always stick as closely as possible to existing syntax.  Why was <span style="font-family: courier new;" class="mycode_font">::</span> considered useful syntax?  It adds nothing except something else to learn.  On the other hand macros like <span style="font-family: courier new;" class="mycode_font">hook</span> and <span style="font-family: courier new;" class="mycode_font">inline</span> closely mimic the syntax of <span style="font-family: courier new;" class="mycode_font">stock</span> - they look exactly the same as every other function declaration keyword, so nothing new to learn.  There are some macros that don’t - I’ve never liked the <span style="font-family: courier new;" class="mycode_font">:</span> in <span style="font-family: courier new;" class="mycode_font">foreach</span> as that has no precedence (<span style="font-family: courier new;" class="mycode_font">;</span> would be worse, because that implies the expressions are separate).  The <span style="font-family: courier new;" class="mycode_font">&lt;&gt;</span> “special array” syntax as used in the <span style="font-family: courier new;" class="mycode_font">Iterator:</span> syntax above is not great - it has the advantage of making it clear that this is not just a normal array, but with no precedent.  <span style="font-family: courier new;" class="mycode_font">CMD:</span> has been repeatedly documented as very poor syntax, due to copying tags without being a tag.  <span style="font-family: courier new;" class="mycode_font">timer Func[TIME]()</span> has no precedence - what does the <span style="font-family: courier new;" class="mycode_font">[]</span> syntax mean there without context?  Show me a YSI macro and I can probably tell you why I hate it.<br />
<br />
Note that I’m only talking about external macros here - those designed for users of the library, internal ones are irrelevant, they’re again implementation details (and the reason they’re almost unreadable is that a) that’s just how writing macros is, and b) compiler line length limits).
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --></td>
</tr>
</table>
<script data-cfasync="false" src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html>
<!-- end: printthread -->