<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><!-- start: printthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title> Timers module - Printable Version</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
body { font-family: Verdana, Arial, sans-serif; font-size: 13px; }
.largetext { font-family: Verdana, Arial, sans-serif; font-size: medium; font-weight: bold; }
img { max-width: 100%; height: auto; }
</style>
</head>
<body>
<table width="98%" align="center">
<tr>
<td valign="top"><a href="index-2.html"><img src="images/emerald/logo.html" alt="Burgershot" title="Burgershot" border="0" /></a></td>
</tr>
<tr>
<td>
<span class="largetext"> <a href="showthreadbacd.html?tid=583">Timers module</a> - Printable Version</span><br />
<br />
+- Burgershot (<em>https://www.burgershot.gg</em>)<br />
<!-- start: printthread_nav -->
+-- Forum: open.mp (<i>https://www.burgershot.gg/forumdisplay.php?fid=40</i>)<br />
<!-- end: printthread_nav --><!-- start: printthread_nav -->
+--- Forum: Development Updates (<i>https://www.burgershot.gg/forumdisplay.php?fid=43</i>)<br />
<!-- end: printthread_nav -->
+--- Thread:  Timers module (<em>/showthread.php?tid=583</em>)<br />
<br />
</td>
</tr>
<tr>
<td><br /><hr size="1" /><!-- start: printthread_post -->
<strong>Timers module</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2019-05-22</strong>
<br />
<br />
This is a sneak-peek at one of the improved modules we've done, for timers in open.mp:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">native&nbsp;SetTimer</span><span style="color: #007700">(const&nbsp;</span><span style="color: #0000BB">func</span><span style="color: #007700">[],&nbsp;</span><span style="color: #0000BB">msInterval</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">bool</span><span style="color: #007700">:</span><span style="color: #0000BB">repeat</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">SetTimerEx</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">native&nbsp;SetTimerEx</span><span style="color: #007700">(const&nbsp;</span><span style="color: #0000BB">func</span><span style="color: #007700">[],&nbsp;</span><span style="color: #0000BB">msInterval</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">bool</span><span style="color: #007700">:</span><span style="color: #0000BB">repeat</span><span style="color: #007700">,&nbsp;const&nbsp;</span><span style="color: #0000BB">params</span><span style="color: #007700">[],&nbsp;</span><span style="color: #0000BB">GLOBAL_TAG_TYPES</span><span style="color: #007700">:...);<br /></span><span style="color: #0000BB">native&nbsp;KillTimer</span><span style="color: #007700">(</span><span style="color: #0000BB">timer</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">Timer_Kill</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;CreateTimer<br /></span><span style="color: #0000BB">native&nbsp;Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">Timer_Create</span><span style="color: #007700">(const&nbsp;</span><span style="color: #0000BB">func</span><span style="color: #007700">[],&nbsp;</span><span style="color: #0000BB">usDelay</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">usInterval</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">repeatCount</span><span style="color: #007700">,&nbsp;const&nbsp;</span><span style="color: #0000BB">params</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">GLOBAL_TAG_TYPES</span><span style="color: #007700">:...);<br /><br /></span><span style="color: #FF8000">//&nbsp;KillTimer<br /></span><span style="color: #0000BB">native&nbsp;bool</span><span style="color: #007700">:</span><span style="color: #0000BB">Timer_Kill</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Return&nbsp;time&nbsp;till&nbsp;next&nbsp;call.<br /></span><span style="color: #0000BB">native&nbsp;Timer_GetTimeRemaining</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Get&nbsp;number&nbsp;of&nbsp;calls&nbsp;left&nbsp;to&nbsp;make&nbsp;(0&nbsp;for&nbsp;unlimited).<br /></span><span style="color: #0000BB">native&nbsp;Timer_GetCallsRemaining</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Get&nbsp;`repeatCount`&nbsp;parameter.<br /></span><span style="color: #0000BB">native&nbsp;Timer_GetTotalCalls</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp; Get&nbsp;`usInterval`&nbsp;parameter.<br /></span><span style="color: #0000BB">native&nbsp;Timer_GetInterval</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Reset&nbsp;time&nbsp;remaining&nbsp;till&nbsp;next&nbsp;call&nbsp;to&nbsp;`usInterval`.<br /></span><span style="color: #0000BB">native&nbsp;bool</span><span style="color: #007700">:</span><span style="color: #0000BB">Timer_Restart</span><span style="color: #007700">(</span><span style="color: #0000BB">Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">timer</span><span style="color: #007700">);&nbsp;<br /></span></code></div></div></div><br />
The first two are just for backwards-compatibility, the rest are the improved API:<br />
<br />
<div class="codeblock phpcodeblock"><div class="title">PHP Code:</div><div class="body"><div dir="ltr"><code><span style="color: #0000BB">native&nbsp;Timer</span><span style="color: #007700">:</span><span style="color: #0000BB">Timer_Create</span><span style="color: #007700">(const&nbsp;</span><span style="color: #0000BB">func</span><span style="color: #007700">[],&nbsp;</span><span style="color: #0000BB">usDelay</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">usInterval</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">repeatCount</span><span style="color: #007700">,&nbsp;const&nbsp;</span><span style="color: #0000BB">params</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">GLOBAL_TAG_TYPES</span><span style="color: #007700">:...);&nbsp;<br /></span></code></div></div></div><ul class="mycode_list"><li>`func` - Fairly obvious; what to call.<br />
</li>
<li>`usDelay` - Again obvious, the delay before the call (in microseconds).<br />
</li>
<li>`usInterval` - What to reset `usDelay` to after the first call.  So if you wanted a timer on the hour every hour, but it was 8:47am right now, the call would be `Timer_Create("OnTheHour", 780 SECONDS, 3600 SECONDS, 0);`<br />
</li>
<li>`repeatCount` - Unlike the old functions, which are just "once" or "forever", this instead takes the number of times to call the function.  "once" would be `1`, `500` would stop after 500 calls, and (backwards from the old API) `0` means "forever".<br />
</li>
<li>`GLOBAL_TAG_TYPES` - Like `{Float, ...}`, but with more tags.<br />
</li>
</ul>

<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberf3df.html?action=profile&amp;uid=5">JustMichael</a> -  <strong>2019-05-22</strong>
<br />
<br />
It's so pretty uwu<br />
<br />
I definitely prefer this over how timers are handled in SA-MP. Even the little things can make a big difference.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member2739.html?action=profile&amp;uid=1066">Freeze</a> -  <strong>2019-05-22</strong>
<br />
<br />
Very good!<br />
I'm looking forward to what's coming soon
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member4b48.html?action=profile&amp;uid=200">Afisiado</a> -  <strong>2019-05-22</strong>
<br />
<br />
Finally, decent functions with timers!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member2eaf.html?action=profile&amp;uid=556">CRHStudios</a> -  <strong>2019-05-22</strong>
<br />
<br />
Pretty good features and improvements with the timers.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member0319.html?action=profile&amp;uid=1105">2PAC_</a> -  <strong>2019-05-23</strong>
<br />
<br />
Very nice, good job!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member1016.html?action=profile&amp;uid=1123">Max_Andolini</a> -  <strong>2019-05-23</strong>
<br />
<br />
This is great!!!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member4410.html?action=profile&amp;uid=325">Verc</a> -  <strong>2019-05-23</strong>
<br />
<br />
What a great news!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberb09f.html?action=profile&amp;uid=1117">Koplan</a> -  <strong>2019-05-23</strong>
<br />
<br />
Good Job!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member901a.html?action=profile&amp;uid=924">Hawkins</a> -  <strong>2019-05-23</strong>
<br />
<br />
Continue in the same spirit
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberc8dd.html?action=profile&amp;uid=221">Manyula</a> -  <strong>2019-05-23</strong>
<br />
<br />
Absolutely love the new API, great job! Not really a fan of the prefixing of the functions, though. Is that scheme gonna be applied to all of the new API?
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberd985.html?action=profile&amp;uid=9">BigETI</a> -  <strong>2019-05-23</strong>
<br />
<br />
Think it having two names: The prefix is the library or module the function is from and the suffix is the actual function name. The underscore just seperates both names.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberf3df.html?action=profile&amp;uid=5">JustMichael</a> -  <strong>2019-05-23</strong>
<br />
<br />
<blockquote class="mycode_quote"><cite><span> (2019-05-23, 06:59 PM)</span>BigETI Wrote:  <a href="showthread05cb.html?pid=5490#pid5490" class="quick_jump"></a></cite>Think it having two names: The prefix is the library or module the function is from and the suffix is the actual function name. The underscore just seperates both names.</blockquote><br />
Well said, sir. Have a box of cookies :)<br />
<br />
I do prefer this to how SA-MP does it, and I wouldn't want to have mixed casing.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberc8dd.html?action=profile&amp;uid=221">Manyula</a> -  <strong>2019-05-23</strong>
<br />
<br />
I understand that the prefix is there to be able to quickly identify the module it belongs to, but imho I don't think that's necessary. But then again, I think this comes down to personal taste.<br />
<br />
One more thing: I think some of the timer functions lack a certain consistency in terms of naming.<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_Get[b]Time[/b][i]Remaining[/i](Timer:timer);<br />
native Timer_Get[b]Calls[/b][i]Remaining[/i](Timer:timer);</code></div></div><br />
should be...<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_Get[i]Remaining[/i][b]Time[/b](Timer:timer);<br />
native Timer_Get[i]Remaining[/i][b]Calls[/b](Timer:timer);</code></div></div><br />
to be in line with...<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_GetTotalCalls(Timer:timer);</code></div></div><br />
as the latter sounds more natural.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberd985.html?action=profile&amp;uid=9">BigETI</a> -  <strong>2019-05-23</strong>
<br />
<br />
The naming of the functions is more a convention we are going to use rather than personal taste. (I personally don't like it)
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member3401.html?action=profile&amp;uid=799">NexoR</a> -  <strong>2019-05-23</strong>
<br />
<br />
Good job.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2019-05-24</strong>
<br />
<br />
<blockquote class="mycode_quote"><cite><span> (2019-05-23, 07:11 PM)</span>Manyula Wrote:  <a href="showthread4196.html?pid=5492#pid5492" class="quick_jump"></a></cite>I understand that the prefix is there to be able to quickly identify the module it belongs to, but imho I don't think that's necessary. But then again, I think this comes down to personal taste.<br />
<br />
One more thing: I think some of the timer functions lack a certain consistency in terms of naming.<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_Get[b]Time[/b][i]Remaining[/i](Timer:timer);<br />
native Timer_Get[b]Calls[/b][i]Remaining[/i](Timer:timer);</code></div></div><br />
should be...<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_Get[i]Remaining[/i][b]Time[/b](Timer:timer);<br />
native Timer_Get[i]Remaining[/i][b]Calls[/b](Timer:timer);</code></div></div><br />
to be in line with...<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>native Timer_GetTotalCalls(Timer:timer);</code></div></div><br />
as the latter sounds more natural.</blockquote><br />
You're right about the mixed verb/noun order, I'll fix that.<br />
<br />
As for module prefixes, that's now quite well established.  It gives a nice consistent naming scheme, and there's a longer-term goal you'll have to wait for to see...
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member1768.html?action=profile&amp;uid=315">Gravityfalls</a> -  <strong>2019-05-24</strong>
<br />
<br />
Amazing.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member7b6b.html?action=profile&amp;uid=65">Riddick</a> -  <strong>2019-05-29</strong>
<br />
<br />
This seems to be all right. Is it PAWN limitation or bad SA-MP's SetTimer(Ex) functions coding that we are not allowed to pass strings in it? (or we are but it didn't work correctly - I can't remember now).<br />
<br />
---<br />
I still wish here for "IsValidTimer" function. I know that IDs could be assigned to a new timer where the other timer has finished its job and it doesn't guarantee that the timer in a give slot is still the same, but some internal IDs should be assigned once maybe? I guess maybe use versioned timer IDs?<br />
<br />
Unless you are not going for it.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2019-05-29</strong>
<br />
<br />
It's a bug in the native, not a pawn limitation.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberaad5.html?action=profile&amp;uid=620">Expert*</a> -  <strong>2019-05-30</strong>
<br />
<br />
I use module prefixes for fixed/protected/new functions so i love it. What i don't love is extra work to ensure compatibility.<br />
<br />
global func: Player_SetSkin<br />
static func: player_setskin<br />
call: PLAYER_RequestSpawn
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2019-05-30</strong>
<br />
<br />
I'm not sure what that last line is.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberaad5.html?action=profile&amp;uid=620">Expert*</a> -  <strong>2019-05-31</strong>
<br />
<br />
Callback, starts with uppercase letters ( PLAYER_, VEHICLE_ ) ex: PLAYER_EnterVehicle.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="membere2a3.html?action=profile&amp;uid=6">Y_Less</a> -  <strong>2019-05-31</strong>
<br />
<br />
Callbacks start with "On".
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberaad5.html?action=profile&amp;uid=620">Expert*</a> -  <strong>2019-06-03</strong>
<br />
<br />
*that's how i prefer to name my callbacks*<br />
I started to name them like this because "OnPlayerLogin" was taken by y_users.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member6b36.html?action=profile&amp;uid=1104">Roth</a> -  <strong>2019-06-06</strong>
<br />
<br />
Incredible, very good job.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberf87a.html?action=profile&amp;uid=1086">BoNNe</a> -  <strong>2019-06-07</strong>
<br />
<br />
great job
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member571d.html?action=profile&amp;uid=917">TroyST</a> -  <strong>2019-06-09</strong>
<br />
<br />
Well done wise man!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member81f8.html?action=profile&amp;uid=340">Sasino97</a> -  <strong>2019-06-11</strong>
<br />
<br />
I hope this one to work when passing strings as parameters, lol.<br />
<br />
<blockquote class="mycode_quote"><cite><span> (2019-05-23, 06:59 PM)</span>BigETI Wrote:  <a href="showthread05cb.html?pid=5490#pid5490" class="quick_jump"></a></cite>Think it having two names: The prefix is the library or module the function is from and the suffix is the actual function name. The underscore just seperates both names.</blockquote><br />
That is how it should be :D<br />
Then I will <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>#define Timer. Timer_<br />
<br />
Timer.Create(...);</code></div></div> and pretend to be using some high level OO programming language, like I always do.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="memberc385.html?action=profile&amp;uid=41">Markski</a> -  <strong>2019-06-11</strong>
<br />
<br />
This is really good. Just some days ago I was considering making an include (based on samp-precise-timers) for functions to have a limited loop lifetime without needing to have such logic to kill the timer on each public. Glad to see this is being done for the OG native.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member7079.html?action=profile&amp;uid=850">[SF]kAn3</a> -  <strong>2019-10-02</strong>
<br />
<br />
So should I stop using y_timers?
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member88ff.html?action=profile&amp;uid=2309">2KY</a> -  <strong>2020-04-24</strong>
<br />
<br />
Very nice improvements to the code. Thanks!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
<strong>RE: Timers module</strong> - <a href="member9c2a.html?action=profile&amp;uid=883">EvilShadeZ</a> -  <strong>2020-04-25</strong>
<br />
<br />
I think this module is missing Timer_SetCallsRemaining(Timer:timer,calls);<br />
This would be very useful for adjusting how many calls are left. Useful for shortening / extending repeating timers.<br />
<br />
Absolutely loving timers in microseconds. How accurate are they compared to SA-MP timers?
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --></td>
</tr>
</table>
</body>
</html>
<!-- end: printthread -->